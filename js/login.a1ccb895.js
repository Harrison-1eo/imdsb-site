(self["webpackChunkimvue"]=self["webpackChunkimvue"]||[]).push([[966],{2587:function(t,e,s){var r;s(4114),s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2024
 * @license MIT
 */
function(){"use strict";var e="input is invalid type",i="object"===typeof window,a=i?window:{};a.JS_SHA256_NO_WINDOW&&(i=!1);var o=!i&&"object"===typeof self,n=!a.JS_SHA256_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;n?a=s.g:o&&(a=self);var h=!a.JS_SHA256_NO_COMMON_JS&&t.exports,l=s.amdO,c=!a.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,u="0123456789abcdef".split(""),d=[-2147483648,8388608,32768,128],f=[24,16,8,0],g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=["hex","array","digest","arrayBuffer"],y=[];!a.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!c||!a.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var b=function(t,e){return function(s){return new A(e,!0).update(s)[t]()}},k=function(t){var e=b("hex",t);n&&(e=w(e,t)),e.create=function(){return new A(t)},e.update=function(t){return e.create().update(t)};for(var s=0;s<p.length;++s){var r=p[s];e[r]=b(r,t)}return e},w=function(t,r){var i,o=s(4394),n=s(1903).Buffer,h=r?"sha224":"sha256";i=n.from&&!a.JS_SHA256_NO_BUFFER_FROM?n.from:function(t){return new n(t)};var l=function(s){if("string"===typeof s)return o.createHash(h).update(s,"utf8").digest("hex");if(null===s||void 0===s)throw new Error(e);return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===n?o.createHash(h).update(i(s)).digest("hex"):t(s)};return l},v=function(t,e){return function(s,r){return new U(s,e,!0).update(r)[t]()}},m=function(t){var e=v("hex",t);e.create=function(e){return new U(e,t)},e.update=function(t,s){return e.create(t).update(s)};for(var s=0;s<p.length;++s){var r=p[s];e[r]=v(r,t)}return e};function A(t,e){e?(y[0]=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0,this.blocks=y):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function U(t,s,r){var i,a=typeof t;if("string"===a){var o,n=[],h=t.length,l=0;for(i=0;i<h;++i)o=t.charCodeAt(i),o<128?n[l++]=o:o<2048?(n[l++]=192|o>>>6,n[l++]=128|63&o):o<55296||o>=57344?(n[l++]=224|o>>>12,n[l++]=128|o>>>6&63,n[l++]=128|63&o):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++i)),n[l++]=240|o>>>18,n[l++]=128|o>>>12&63,n[l++]=128|o>>>6&63,n[l++]=128|63&o);t=n}else{if("object"!==a)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!c||!ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new A(s,!0).update(t).array());var u=[],d=[];for(i=0;i<64;++i){var f=t[i]||0;u[i]=92^f,d[i]=54^f}A.call(this,s,r),this.update(d),this.oKeyPad=u,this.inner=!0,this.sharedMemory=r}A.prototype.update=function(t){if(!this.finalized){var s,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!c||!ArrayBuffer.isView(t)))throw new Error(e);s=!0}var i,a,o=0,n=t.length,h=this.blocks;while(o<n){if(this.hashed&&(this.hashed=!1,h[0]=this.block,this.block=h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),s)for(a=this.start;o<n&&a<64;++o)h[a>>>2]|=t[o]<<f[3&a++];else for(a=this.start;o<n&&a<64;++o)i=t.charCodeAt(o),i<128?h[a>>>2]|=i<<f[3&a++]:i<2048?(h[a>>>2]|=(192|i>>>6)<<f[3&a++],h[a>>>2]|=(128|63&i)<<f[3&a++]):i<55296||i>=57344?(h[a>>>2]|=(224|i>>>12)<<f[3&a++],h[a>>>2]|=(128|i>>>6&63)<<f[3&a++],h[a>>>2]|=(128|63&i)<<f[3&a++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++o)),h[a>>>2]|=(240|i>>>18)<<f[3&a++],h[a>>>2]|=(128|i>>>12&63)<<f[3&a++],h[a>>>2]|=(128|i>>>6&63)<<f[3&a++],h[a>>>2]|=(128|63&i)<<f[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=h[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=d[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var t,e,s,r,i,a,o,n,h,l,c,u=this.h0,d=this.h1,f=this.h2,p=this.h3,y=this.h4,b=this.h5,k=this.h6,w=this.h7,v=this.blocks;for(t=16;t<64;++t)i=v[t-15],e=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=v[t-2],s=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,v[t]=v[t-16]+e+v[t-7]+s|0;for(c=d&f,t=0;t<64;t+=4)this.first?(this.is224?(n=300032,i=v[0]-1413257819,w=i-150054599|0,p=i+24177077|0):(n=704751109,i=v[0]-210244248,w=i-1521486534|0,p=i+143694565|0),this.first=!1):(e=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),n=u&d,r=n^u&f^c,o=y&b^~y&k,i=w+s+o+g[t]+v[t],a=e+r,w=p+i|0,p=i+a|0),e=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),s=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),h=p&u,r=h^p&d^n,o=w&y^~w&b,i=k+s+o+g[t+1]+v[t+1],a=e+r,k=f+i|0,f=i+a|0,e=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),s=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),l=f&p,r=l^f&u^h,o=k&w^~k&y,i=b+s+o+g[t+2]+v[t+2],a=e+r,b=d+i|0,d=i+a|0,e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),s=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),c=d&f,r=c^d&p^l,o=b&k^~b&w,i=y+s+o+g[t+3]+v[t+3],a=e+r,y=u+i|0,u=i+a|0,this.chromeBugWorkAround=!0;this.h0=this.h0+u|0,this.h1=this.h1+d|0,this.h2=this.h2+f|0,this.h3=this.h3+p|0,this.h4=this.h4+y|0,this.h5=this.h5+b|0,this.h6=this.h6+k|0,this.h7=this.h7+w|0},A.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,n=this.h7,h=u[t>>>28&15]+u[t>>>24&15]+u[t>>>20&15]+u[t>>>16&15]+u[t>>>12&15]+u[t>>>8&15]+u[t>>>4&15]+u[15&t]+u[e>>>28&15]+u[e>>>24&15]+u[e>>>20&15]+u[e>>>16&15]+u[e>>>12&15]+u[e>>>8&15]+u[e>>>4&15]+u[15&e]+u[s>>>28&15]+u[s>>>24&15]+u[s>>>20&15]+u[s>>>16&15]+u[s>>>12&15]+u[s>>>8&15]+u[s>>>4&15]+u[15&s]+u[r>>>28&15]+u[r>>>24&15]+u[r>>>20&15]+u[r>>>16&15]+u[r>>>12&15]+u[r>>>8&15]+u[r>>>4&15]+u[15&r]+u[i>>>28&15]+u[i>>>24&15]+u[i>>>20&15]+u[i>>>16&15]+u[i>>>12&15]+u[i>>>8&15]+u[i>>>4&15]+u[15&i]+u[a>>>28&15]+u[a>>>24&15]+u[a>>>20&15]+u[a>>>16&15]+u[a>>>12&15]+u[a>>>8&15]+u[a>>>4&15]+u[15&a]+u[o>>>28&15]+u[o>>>24&15]+u[o>>>20&15]+u[o>>>16&15]+u[o>>>12&15]+u[o>>>8&15]+u[o>>>4&15]+u[15&o];return this.is224||(h+=u[n>>>28&15]+u[n>>>24&15]+u[n>>>20&15]+u[n>>>16&15]+u[n>>>12&15]+u[n>>>8&15]+u[n>>>4&15]+u[15&n]),h},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,n=this.h7,h=[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,s>>>24&255,s>>>16&255,s>>>8&255,255&s,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o];return this.is224||h.push(n>>>24&255,n>>>16&255,n>>>8&255,255&n),h},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},U.prototype=new A,U.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),A.prototype.finalize.call(this)}};var L=k();L.sha256=L,L.sha224=k(!0),L.sha256.hmac=m(),L.sha224.hmac=m(!0),h?t.exports=L:(a.sha256=L.sha256,a.sha224=L.sha224,l&&(r=function(){return L}.call(L,s,L,t),void 0===r||(t.exports=r)))}()},9921:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return K}});var r=s(6768);const i={class:"backgroud"},a=(0,r.Lk)("div",{class:"title"},[(0,r.Lk)("h2",null," Welcome to Our IM System ")],-1),o={class:"login-container"},n={class:"login-form"},h={class:"tabs"},l=(0,r.Lk)("div",{id:"loginTab",class:"loginTab",style:{color:"#f60"}},"账号密码登录",-1),c=(0,r.Lk)("div",{class:"registerTab"},"注册",-1),u=[l,c],d={class:"tab-content"},f={class:"description"},g={class:"about"},p=(0,r.Lk)("p",null," 一个vue项目，后端使用Go语言构建，通信采用websocket，加解密算法使用C语言编写。 一个基于软件优化后的ZUC-256国密算法的即时多人聊天系统，可以文字聊天，可以发文件，开启多人视频会议，传输的内容都经过了我们小组封装好的协议的加密保护，确保了保密性，软件优化后的ZUC-256算法高效且多密钥状态下加解密速度快，达到38Gbps，使得加解密速度不再成为系统性能瓶颈。 ",-1);function y(t,e,s,l,c,y){return(0,r.uX)(),(0,r.CE)("div",i,[a,(0,r.Lk)("div",o,[(0,r.Lk)("div",n,[(0,r.Lk)("div",h,[(0,r.Lk)("div",{class:"damn",onClick:e[0]||(e[0]=(...t)=>y.handleClick&&y.handleClick(...t))},u),(0,r.Lk)("div",d,[((0,r.uX)(),(0,r.Wv)(r.PR,null,[((0,r.uX)(),(0,r.Wv)((0,r.$y)(c.curTabComponents[c.activeTab])))],1024))])])])]),(0,r.Lk)("div",f,[(0,r.Lk)("div",g,[p,(0,r.Lk)("div",{onClick:e[1]||(e[1]=t=>y.goPage("https://github.com/Harrison-1eo/ZUIM/"))},"项目源码")])])])}const b={class:"tab-content-2"},k={class:"logincontainer"},w={class:"loginorreg"},v=(0,r.Lk)("p",null,"账号",-1),m={class:"loginorreg"},A=(0,r.Lk)("p",null,"密码",-1),U={class:"login-or-regsiter",style:{"text-align":"center"}};function L(t,e,s,i,a,o){const n=(0,r.g2)("el-input"),h=(0,r.g2)("el-button");return(0,r.uX)(),(0,r.CE)("div",b,[(0,r.Lk)("div",k,[(0,r.Lk)("div",w,[v,(0,r.bF)(n,{modelValue:a.loginUsername,"onUpdate:modelValue":e[0]||(e[0]=t=>a.loginUsername=t),placeholder:"请输入账号",type:"text",clearable:""},null,8,["modelValue"])]),(0,r.Lk)("div",m,[A,(0,r.bF)(n,{modelValue:a.loginPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>a.loginPassword=t),placeholder:"请输入密码",type:"password",style:{"text-align":"center, width:80%"},"show-password":""},null,8,["modelValue"])])]),(0,r.Lk)("div",U,[(0,r.bF)(h,{type:"primary",onClick:o.apiLogin},{default:(0,r.k6)((()=>[(0,r.eW)("登录")])),_:1},8,["onClick"])])])}s(4114);var _=s(8355),S=s(4985);console.log("backendBaseUrl >>> ",S.b);const T=_.A.create({baseURL:S.b,timeout:1e4});T.interceptors.request.use((t=>t),(t=>Promise.reject(t)));var B=T,C=s(5548),P=s(1219),V={name:"UserLogin",data(){return{activeTab:"loginTab",loginUsername:"",loginPassword:""}},methods:{checkLogin(){return""!==this.loginUsername&&""!==this.loginPassword||(P.nk.error("用户名或密码不能为空"),!1)},async apiLogin(){if(!1!==this.checkLogin())try{const t=await B.post("/login",{username:this.loginUsername,password:this.loginPassword});if(200===t.status)if(0===t.data.code){localStorage.setItem("token",t.data.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user.username)),localStorage.setItem("userId",JSON.stringify(t.data.data.user.ID)),this.$router.push("/im");let e=["backend","frontend","websocketBackend","websocketFrontend"],r=[];for(let i=0;i<e.length;i++){const a=s(2587).sha256(this.loginPassword),o=t.data.data.token+a+t.data.data.user.ID+e[i],n=s(2587).sha256(o);localStorage.setItem(e[i]+"Password",n),r.push(n)}C.VJ.init(r[0]),C.Ln.init(r[1]),C.Uf.init(r[2]),C.uw.init(r[3]),P.nk.success("登录成功")}else P.nk.error(t.data.msg);else P.nk.error("登录请求失败")}catch(t){P.nk.error("连接服务器请求失败")}}}},x=s(1241);const E=(0,x.A)(V,[["render",L]]);var O=E;const R={class:"tab-content-2"},F={class:"logincontainer"},I={class:"loginorreg"},J=(0,r.Lk)("p",null,"账号",-1),N={class:"loginorreg"},z=(0,r.Lk)("p",null,"密码",-1),H={class:"loginorreg"},j=(0,r.Lk)("p",null,"确认密码",-1),W={class:"login-or-regsiter",style:{"text-align":"center"}};function M(t,e,s,i,a,o){const n=(0,r.g2)("el-input"),h=(0,r.g2)("el-button");return(0,r.uX)(),(0,r.CE)("div",R,[(0,r.Lk)("div",F,[(0,r.Lk)("div",I,[J,(0,r.bF)(n,{modelValue:a.registerUsername,"onUpdate:modelValue":e[0]||(e[0]=t=>a.registerUsername=t),placeholder:"请输入账号",type:"text",clearable:""},null,8,["modelValue"])]),(0,r.Lk)("div",N,[z,(0,r.bF)(n,{modelValue:a.registerPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>a.registerPassword=t),placeholder:"请输入密码",type:"password","show-password":""},null,8,["modelValue"])]),(0,r.Lk)("div",H,[j,(0,r.bF)(n,{modelValue:a.registerPassword2,"onUpdate:modelValue":e[2]||(e[2]=t=>a.registerPassword2=t),placeholder:"请再次输入密码",type:"password","show-password":""},null,8,["modelValue"])])]),(0,r.Lk)("div",W,[(0,r.bF)(h,{type:"primary",onClick:o.apiRegister},{default:(0,r.k6)((()=>[(0,r.eW)("注册")])),_:1},8,["onClick"])])])}var D={name:"UserLogin",data(){return{activeTab:"loginTab",registerUsername:"",registerPassword:"",registerPassword2:""}},methods:{checkRegister(){return""===this.registerUsername||""===this.registerPassword||""===this.registerPassword2?(P.nk.error("用户名或密码不能为空"),!1):this.registerPassword===this.registerPassword2||(P.nk.error("两次输入密码不一致"),!1)},async apiRegister(){if(!1!==this.checkRegister())try{const t=await B.post("/register",{username:this.registerUsername,password:this.registerPassword});200===t.status?0===t.data.code?(P.nk.success("注册成功"),this.activeTab="loginTab",this.password="",this.password2=""):P.nk.error(t.data.msg):P.nk.error("注册请求失败")}catch(t){P.nk.error("连接服务器请求失败")}}}};const X=(0,x.A)(D,[["render",M]]);var Z=X,q={name:"UserLogin",data(){return{activeTab:"loginTab",curTabComponents:{loginTab:O,registerTab:Z}}},created(){var t=document.querySelector("#loginTab");t?t.style.color="#f60":console.error('Element with id "loginTab" not found')},components:{UserLogin:O,UserRegister:Z},methods:{goToLogin(){this.activeTab="loginTab"},goToRegister(){this.activeTab="registerTab"},handleClick(t){"账号密码登录"===t.target.innerText?(this.goToLogin(),t.target.style.color="#f60",t.target.nextElementSibling.style.color="#000"):(this.goToRegister(),t.target.style.color="#f60",t.target.previousElementSibling.style.color="#000")},goPage(t){window.location.href=t}}};const G=(0,x.A)(q,[["render",y]]);var K=G},1903:function(){},4394:function(){}}]);
//# sourceMappingURL=login.a1ccb895.js.map