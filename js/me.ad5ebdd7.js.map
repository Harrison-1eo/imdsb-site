{"version":3,"file":"js/me.ad5ebdd7.js","mappings":"6JAKA,MAAMA,EAAeC,EAAAA,EAAMC,OAAO,CAC9BC,QAASC,EAAAA,EACTC,QAAS,MAIbL,EAAaM,aAAaC,QAAQC,KAC9BC,IAII,GAHAA,EAAOC,QAAQC,cAAiB,UAASC,aAAaC,QAAQ,YAGzDJ,EAAOK,IAAIC,SAAS,WACjBN,EAAOO,KAAM,CAEb,MAAMC,EAAKC,EAAAA,GAAmBC,QAAQC,KAAKC,UAAUZ,EAAOO,OAQ5DP,EAAOO,KAAO,CACVA,KAAMC,EAAGK,WACTC,SAAUN,EAAGM,SACbC,IAAK,GACLC,OAAQ,EAEhB,CAEJ,OAAOhB,CAAM,IAEjBiB,IACIC,QAAQC,IAAI,gBAAiBF,GACtBG,QAAQC,OAAOJ,MAM9B1B,EAAaM,aAAayB,SAASvB,KAC/BuB,IAGI,GAAIA,EAASf,KAAKA,KAAM,CACpB,MAAMgB,EAAgBD,EAASf,KAAKiB,QAAQjB,KACtCO,EAAWQ,EAASf,KAAKiB,QAAQV,SACvC,IAAIW,EAAgB,GACpB,IACIA,EAAgBC,EAAAA,GAAkBC,QAAQJ,EAAeT,EAC7D,CAAE,MAAOc,GACLC,EAAAA,GAAUZ,MAAM,kBAChBd,aAAa2B,cACb,GAAKC,QAAQC,KAAK,SACtB,CACAV,EAASf,KAAKA,KAAOI,KAAKsB,MAAMR,EACpC,CACA,OAAOH,CAAQ,IAEnBL,IACIC,QAAQC,IAAI,QAASF,GACS,MAA1BA,EAAMK,SAASY,SACfL,EAAAA,GAAUZ,MAAM,iBAChBd,aAAa2B,QACbK,OAAOC,SAASC,KAAO,UAEpBjB,QAAQC,OAAOJ,MAK9B,K,2JCzESqB,MAAM,sB,GACFA,MAAM,a,UACPC,EAAAA,EAAAA,IAAwC,MAApCC,MAAA,yBAA2B,QAAI,K,GAsBlCF,MAAM,gB,2KAxBfG,EAAAA,EAAAA,IA2BM,MA3BNC,EA2BM,EA1BFH,EAAAA,EAAAA,IAsBM,MAtBNI,EAsBM,CArBFC,GAEAC,EAAAA,EAAAA,IAYUC,EAAA,CAZDR,MAAM,iBAAe,CAP1CS,SAAAC,EAAAA,EAAAA,KAQgB,IAUe,EAVfH,EAAAA,EAAAA,IAUeI,EAAA,CAVD,aAAW,qBAAmB,CAR5DF,SAAAC,EAAAA,EAAAA,KAY4B,IAAqB,gBAH7BP,EAAAA,EAAAA,IAQeS,EAAAA,GAAA,MAjBnCC,EAAAA,EAAAA,IAY2CC,EAAAC,OAARC,K,WAHfC,EAAAA,EAAAA,IAQeC,EAAA,CAPN,iBAAgBJ,EAAAK,aACjBnB,MAAM,sBAELoB,IAAKJ,EAAKK,GACVC,MAAON,EAAKK,GACZE,QAAKC,GAAEC,EAAAC,cAAcV,EAAKK,K,CAfvDZ,SAAAC,EAAAA,EAAAA,KAgBwB,IAAe,EAhBvCiB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAgB2BZ,EAAKa,MAAI,MAhBpCC,EAAA,G,uDAAAA,EAAA,OAAAA,EAAA,KAoBYvB,EAAAA,EAAAA,IAKYwB,EAAA,CAJJC,KAAK,UACLhC,MAAM,kBACLuB,QAAOE,EAAAQ,e,CAvB5BxB,SAAAC,EAAAA,EAAAA,KAuB2C,IAE/B,EAzBZiB,EAAAA,EAAAA,IAuB2C,cAvB3CG,EAAA,G,kBA2BQ7B,EAAAA,EAAAA,IAEM,MAFNiC,EAEM,CADcpB,EAAAK,eAAY,WAA5BF,EAAAA,EAAAA,IAA4GkB,EAAA,CA5BxHf,IAAA,EA4B2CgB,OAAQtB,EAAAK,aAAsBkB,sBAAuBvB,EAAAuB,sBA5BhG,iCAAAC,EAAA,KAAAA,EAAA,GAAAd,GA4BgGV,EAAAuB,sBAAqBb,I,6CA5BrHe,EAAAA,EAAAA,IAAA,U,wBCCSvC,MAAM,gB,GACFA,MAAM,e,GACJA,MAAM,c,GAWRA,MAAM,WAAWwC,GAAG,Y,GAChBxC,MAAM,gBAAgByC,IAAI,mBAAmBD,GAAG,e,GAGxCC,IAAI,QAAQzC,MAAM,sB,GAlB3CoB,IAAA,EA8BqBpB,MAAM,kBAAkB0C,MAAM,MAAMC,OAAO,O,GAK/C3C,MAAM,YAAYwC,GAAG,a,wQAlClCrC,EAAAA,EAAAA,IAsCM,MAtCNC,EAsCM,EArCFH,EAAAA,EAAAA,IAKM,MALNI,EAKM,EAJFJ,EAAAA,EAAAA,IAA+C,IAA/CK,GAA+CsB,EAAAA,EAAAA,IAArBd,EAAA8B,SAASf,MAAI,GACxBgB,EAAAT,SAAM,WAArBnB,EAAAA,EAAAA,IAEU6B,EAAA,CANtB1B,IAAA,EAIoCG,QAAKe,EAAA,KAAAA,EAAA,GAAAd,GAAEV,EAAAiC,QAAM,GAAO/C,MAAM,a,CAJ9DS,SAAAC,EAAAA,EAAAA,KAKgB,IAAO,EAAPH,EAAAA,EAAAA,IAAOyC,MALvBlB,EAAA,MAAAS,EAAAA,EAAAA,IAAA,SAQ0BM,EAAAT,SAAM,WAAxBnB,EAAAA,EAAAA,IAI8BgC,EAAA,CAZtC7B,IAAA,EAAA8B,WAS6BpC,EAAAiC,OAT7B,sBAAAT,EAAA,KAAAA,EAAA,GAAAd,GAS6BV,EAAAiC,OAAMvB,GACP2B,SAAUrC,EAAAqC,SAVtC,oBAAAb,EAAA,KAAAA,EAAA,GAAAd,GAUsCV,EAAAqC,SAAQ3B,GAClBoB,SAAU9B,EAAA8B,SAXtC,oBAAAN,EAAA,KAAAA,EAAA,GAAAd,GAWsCV,EAAA8B,SAAQpB,GACzBY,OAAQS,EAAAT,Q,wDAZ7BG,EAAAA,EAAAA,IAAA,QAcQtC,EAAAA,EAAAA,IAwBM,MAxBNiC,EAwBM,EAvBFjC,EAAAA,EAAAA,IAWM,MAXNmD,EAWM,EATF7C,EAAAA,EAAAA,IAQeI,EAAA,CARD8B,IAAI,aAAW,CAjB7ChC,SAAAC,EAAAA,EAAAA,KAkBoB,IAMM,EANNT,EAAAA,EAAAA,IAMM,MANNoD,EAMM,EALF9C,EAAAA,EAAAA,IAEYwB,EAAA,CAFDC,KAAK,OAAOsB,KAAA,GAAM/B,QAAOE,EAAA8B,uBAAwBrD,MAAA,gB,CAnBpFO,SAAAC,EAAAA,EAAAA,KAmBwG,IAEhF,EArBxBiB,EAAAA,EAAAA,IAmBwG,iBAnBxGG,EAAA,G,8BAsBwB3B,EAAAA,EAAAA,IAC8BS,EAAAA,GAAA,MAvBtDC,EAAAA,EAAAA,IAsBgEC,EAAA0C,UAtBhE,CAsB6CC,EAASnC,M,WAA9BL,EAAAA,EAAAA,IAC8ByC,EAAA,CADqBtC,IAAKE,EAAQmC,QAASA,EAC5DzD,MAAM,W,sCAvB3C8B,EAAA,G,YA4BYvB,EAAAA,EAAAA,IAKYoD,EAAA,CAjCxBT,WA4BgCpC,EAAA8C,oBA5BhC,sBAAAtB,EAAA,KAAAA,EAAA,GAAAd,GA4BgCV,EAAA8C,oBAAmBpC,GAAEqC,MAAM,QAAQnB,MAAM,MAAMC,OAAO,MACvDmB,QAAShD,EAAA8C,oBA7BxC,mBAAAtB,EAAA,KAAAA,EAAA,GAAAd,GA6BwCV,EAAA8C,oBAAmBpC,GAAG,wBAAsB,EAAQ,yBAAuB,G,CA7BnHf,SAAAC,EAAAA,EAAAA,KA8BgB,IAEM,CAFsDI,EAAA8C,sBAAmB,WAA/EzD,EAAAA,EAAAA,IAEM,MAFN4D,EAEM,EADNxD,EAAAA,EAAAA,IAA8IyD,EAAA,CAAjI5B,OAAQS,EAAAT,OAAS6B,WAAYnD,EAAAmD,WAAaC,cAAazC,EAAA0C,YAAcC,8BAA6B3C,EAAA4C,6B,oFA/B/H9B,EAAAA,EAAAA,IAAA,UAAAT,EAAA,G,6BAmCY7B,EAAAA,EAAAA,IAEM,MAFNqE,EAEM,EADN/D,EAAAA,EAAAA,IAAuIgE,EAAA,CAA5H9B,IAAI,YAAaL,OAAQS,EAAAT,OAASoC,OAAM/C,EAAAgD,oBAAsBC,+BAA8BjD,EAAAkD,8B,0IC7BtG3E,MAAM,mB,GAPnBoB,IAAA,EAS+CpB,MAAM,uC,GATrDoB,IAAA,G,GAAAA,IAAA,G,GAAAA,IAAA,EAmCiEpB,MAAM,qB,UAmB3DC,EAAAA,EAAAA,IAAe,WAAV,QAAI,K,UAGbA,EAAAA,EAAAA,IAGM,OAHDD,MAAM,wBAAsB,EAC7BC,EAAAA,EAAAA,IAAkD,OAA7CD,MAAM,4BAA2B,WACtCC,EAAAA,EAAAA,IAA8D,OAAzDD,MAAM,8BAA6B,sBAAgB,K,GAGvDA,MAAM,wB,UACPC,EAAAA,EAAAA,IAAiD,OAA5CD,MAAM,4BAA2B,SAAK,K,GACtCA,MAAM,8B,GAGVA,MAAM,wB,UACPC,EAAAA,EAAAA,IAAiD,OAA5CD,MAAM,4BAA2B,SAAK,K,GACtCA,MAAM,8B,GAGVA,MAAM,wB,UACPC,EAAAA,EAAAA,IAAiD,OAA5CD,MAAM,4BAA2B,SAAK,K,GACtCA,MAAM,8B,GAGVA,MAAM,wB,UACPC,EAAAA,EAAAA,IAA6D,OAAxDD,MAAM,4BAA2B,qBAAiB,K,GAClDA,MAAM,8B,yMA/EvBG,EAAAA,EAAAA,IAAAS,EAAAA,GAAA,OAGIX,EAAAA,EAAAA,IAgDM,OAhDDD,OAHT4E,EAAAA,EAAAA,IAAA,CAGe,eAAc,qBAAgCnD,EAAAoD,iB,EAErDtE,EAAAA,EAAAA,IAAyGuE,EAAA,CAA9FC,MAAM,SAAUC,IAAKvD,EAAAwD,aAAapC,EAAAY,QAAQyB,eAAgBhF,MAAA,sB,iBAErED,EAAAA,EAAAA,IA2CM,MA3CNG,EA2CM,EAzC0B,IAAjBqB,EAAAoD,eAAY,WAAvB1E,EAAAA,EAAAA,IAEM,MAFNE,GAEMuB,EAAAA,EAAAA,IADCiB,EAAAY,QAAQ0B,aAAW,KAVtC5C,EAAAA,EAAAA,IAAA,QAcYtC,EAAAA,EAAAA,IAmCM,OAnCAmF,aAAU9C,EAAA,KAAAA,EAAA,GAAAd,GAAEV,EAAAuE,gBAAiB,GAAOC,aAAUhD,EAAA,KAAAA,EAAA,GAAAd,GAAEV,EAAAuE,gBAAiB,I,EACnEpF,EAAAA,EAAAA,IAiCM,OAjCAD,OAftB4E,EAAAA,EAAAA,IAAA,yBAewDnD,EAAAoD,aAAY,wBAA2BpD,EAAAoD,gB,EAC3E5E,EAAAA,EAAAA,IA2BM,OA3BDD,OAhBzB4E,EAAAA,EAAAA,IAAA,CAgB+B,8BACCnD,EAAAoD,aAAe,yBAA2B,0BAAyB3E,MAAA,gI,CAM/C,SAAjB2C,EAAAY,QAAQzB,OAAI,WAAvB7B,EAAAA,EAAAA,IAEM,MAzB9BG,GAAAsB,EAAAA,EAAAA,IAwB+BiB,EAAAY,QAAQ8B,SAAO,IAIW,UAAjB1C,EAAAY,QAAQzB,OAAI,WAA5B7B,EAAAA,EAAAA,IAIM,MAhC9B+B,EAAA,EA6B4B3B,EAAAA,EAAAA,IAEqDiF,EAAA,CAF1CR,IAAKvD,EAAAgE,UAAU5C,EAAAY,QAAQ8B,SAAUG,IAAI,UAC3CC,eAAc,CAAGlE,EAAAgE,UAAU5C,EAAAY,QAAQ8B,UACpCrF,MAAA,iC,oCAIyB,SAAjB2C,EAAAY,QAAQzB,OAAI,WAA5B7B,EAAAA,EAAAA,IAOM,MAPNiD,EAOM,EANF7C,EAAAA,EAAAA,IAEUuC,EAAA,MAtCtCrC,SAAAC,EAAAA,EAAAA,KAqCgC,IAAQ,EAARH,EAAAA,EAAAA,IAAQqF,MArCxC9D,EAAA,KAuC4BvB,EAAAA,EAAAA,IAEUsF,EAAA,CAFA9F,KAAM0B,EAAAqE,WAAWjD,EAAAY,QAAQ8B,SAAUQ,OAAO,U,CAvChFtF,SAAAC,EAAAA,EAAAA,KAuCyF,IACpD,EAxCrCiB,EAAAA,EAAAA,IAuCyF,UACpDC,EAAAA,EAAAA,IAAA,KAAQoE,YAAYnD,EAAAY,QAAQ8B,UAAO,MAxCxEzD,EAAA,G,gBAAAS,EAAAA,EAAAA,IAAA,WA4CmCzB,EAAAuE,iBAAc,WAA7BpE,EAAAA,EAAAA,IAGU6B,EAAA,CA/C9B1B,IAAA,EA4CmDlB,MAAA,qCAC1BqB,QAAKe,EAAA,KAAAA,EAAA,GAAAd,GAAEV,EAAAmF,YAAa,I,CA7C7CxF,SAAAC,EAAAA,EAAAA,KA8CwB,IAAQ,EAARH,EAAAA,EAAAA,IAAQyC,MA9ChClB,EAAA,MAAAS,EAAAA,EAAAA,IAAA,uBAoDIhC,EAAAA,EAAAA,IA6BYoD,EAAA,CAjFhBT,WAoDwBpC,EAAAmF,WApDxB,sBAAA3D,EAAA,KAAAA,EAAA,GAAAd,GAoDwBV,EAAAmF,WAAUzE,GAAEqC,MAAM,OAAOnB,MAAM,O,CACpCwD,QAAMxF,EAAAA,EAAAA,KACb,IAAe,CAAf2C,KAtDZ5C,SAAAC,EAAAA,EAAAA,KAyDQ,IAGM,CAHNqD,GAKA9D,EAAAA,EAAAA,IAGM,MAHNqE,EAGM,CAFF6B,GACAlG,EAAAA,EAAAA,IAA8E,MAA9EmG,GAA8ExE,EAAAA,EAAAA,IAAnCiB,EAAAY,QAAQ4C,YAAY3H,QAAM,MAGzEuB,EAAAA,EAAAA,IAGM,MAHNqG,EAGM,CAFFC,GACAtG,EAAAA,EAAAA,IAAgF,MAAhFuG,GAAgF5E,EAAAA,EAAAA,IAArCiB,EAAAY,QAAQ4C,YAAY7H,UAAQ,MAG3EyB,EAAAA,EAAAA,IAGM,MAHNwG,EAGM,CAFFC,GACAzG,EAAAA,EAAAA,IAA2E,MAA3E0G,GAA2E/E,EAAAA,EAAAA,IAAhCiB,EAAAY,QAAQ4C,YAAYjF,KAAG,MAGtEnB,EAAAA,EAAAA,IAGM,MAHN2G,EAGM,CAFFC,GACA5G,EAAAA,EAAAA,IAA4E,MAA5E6G,GAA4ElF,EAAAA,EAAAA,IAAjCiB,EAAAY,QAAQ4C,YAAYpI,MAAI,QA/E/E6D,EAAA,G,yDCEIiF,GAASC,EAAAA,EAAAA,IAAgB,CAC3BnF,KAAM,SAGR,MAAMzB,EAAa,CACjB6G,MAAO,6BACPC,QAAS,iBAEL7G,GAA6B8G,EAAAA,EAAAA,IAAY,OAAQ,CACrDC,KAAM,eACNC,EAAG,8mBACF,MAAO,GACV,SAASC,EAAOC,EAAMjF,EAAQO,EAAQ2E,EAAQ1G,EAAOW,GACnD,OAAOgG,EAAAA,EAAAA,OAAaC,EAAAA,EAAAA,IAAY,MAAOtH,EAAY,CACjDC,GAEJ,CAEA0G,EAAOO,OAASA,EAChBP,EAAOY,OAAS,+BAEhB,Q,UDmEA,GACI1J,IAAAA,GACI,MAAO,CACHoH,gBAAgB,EAChBY,YAAY,EAEpB,EACA2B,WAAY,CACRC,KAAI,EACJC,SAAQ,KACRC,QAAO,KACPC,OAAMA,EAAAA,IAEVC,MAAO,CACHxE,QAAS,CACLzB,KAAMkG,OACNC,UAAU,IAGlBC,SAAU,CACNvD,YAAAA,GACI,MAAMwD,EAASxK,aAAaC,QAAQ,UACpC,OAAOuK,GAAUC,SAASD,EAAQ,MAAQE,KAAK9E,QAAQ+E,SAC3D,GAEJC,QAAS,CACL3C,UAAAA,CAAWP,GACP,MAAMmD,EAAQ,sDACRC,EAAQpD,EAAQoD,MAAMD,GAC5B,OAAIC,EACOtL,EAAAA,EAAiBsL,EAAM,GAE3B,EACX,EACA3C,WAAAA,CAAYT,GAGR,MAAMmD,EAAQ,2CACd,OAAOnD,EAAQqD,QAAQF,EAAO,KAClC,EACAzD,YAAAA,CAAa4D,GACT,OAAKA,GAGwB,kBAAXA,EACPxL,EAAAA,EAAiBwL,EAFjB,kEAMf,EACApD,SAAAA,CAAU1H,GACN,OAAIA,EACOV,EAAAA,EAAiBU,EAGrBV,EAAAA,EAAiB,2BAC5B,I,UE3IR,MAAMyL,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,S,qBCRS9I,MAAM,c,IAEFA,MAAM,uB,IAEFA,MAAM,e,IASNA,MAAM,e,IAYNA,MAAM,e,IA1BvBoB,IAAA,EAgCqBpB,MAAM,mB,IAGIyC,IAAI,QAAQD,GAAG,QAAQE,MAAM,MAAMC,OAAO,MAAMoG,SAAA,I,IAWlE/I,MAAM,wB,IAKNA,MAAM,uB,yQAlDfG,EAAAA,EAAAA,IA2DM,MA3DNC,GA2DM,EAzDFH,EAAAA,EAAAA,IAuCM,MAvCNI,GAuCM,EArCFJ,EAAAA,EAAAA,IAOM,MAPNK,GAOM,EANFC,EAAAA,EAAAA,IAIayI,EAAA,CAJDhJ,MAAM,WAAWiJ,OAAO,OAAO1D,QAAQ,OAAO2D,UAAU,O,CANpFzI,SAAAC,EAAAA,EAAAA,KAOoB,IAEU,EAFVH,EAAAA,EAAAA,IAEUuC,EAAA,CAFDqG,KAAK,OAAQ5H,QAAOE,EAAA2H,kB,CAPjD3I,SAAAC,EAAAA,EAAAA,KAQwB,IAAW,EAAXH,EAAAA,EAAAA,IAAW8I,MARnCvH,EAAA,G,kBAAAA,EAAA,KAWgB7B,EAAAA,EAAAA,IAAwG,SAAjG+B,KAAK,OAAOS,IAAI,aAAavC,MAAA,iBAAuBoJ,OAAO,UAAWC,SAAMjH,EAAA,KAAAA,EAAA,OAAAkH,IAAE/H,EAAAgI,mBAAAhI,EAAAgI,qBAAAD,K,aAGzFvJ,EAAAA,EAAAA,IAUM,MAVNiC,GAUM,EATF3B,EAAAA,EAAAA,IAMayI,EAAA,CANDhJ,MAAM,WAAWiJ,OAAO,OAAO1D,QAAQ,OAAO2D,UAAU,O,CAfpFzI,SAAAC,EAAAA,EAAAA,KAkBoB,IAEU,EAFVH,EAAAA,EAAAA,IAEUuC,EAAA,CAFDqG,KAAK,OAAQ5H,QAAOE,EAAAiI,iB,CAlBjDjJ,SAAAC,EAAAA,EAAAA,KAmBwB,IAAa,EAAbH,EAAAA,EAAAA,IAAaoJ,MAnBrC7H,EAAA,G,kBAAAA,EAAA,KAuBgB7B,EAAAA,EAAAA,IAAqF,SAA9E+B,KAAK,OAAOS,IAAI,YAAYvC,MAAA,iBAAwBqJ,SAAMjH,EAAA,KAAAA,EAAA,OAAAkH,IAAE/H,EAAAmI,kBAAAnI,EAAAmI,oBAAAJ,K,aAGvEvJ,EAAAA,EAAAA,IAeM,MAfNmD,GAeM,EAdF7C,EAAAA,EAAAA,IAIayI,EAAA,CAJDzD,QAAQ,QAAQ2D,UAAU,O,CA3BtDzI,SAAAC,EAAAA,EAAAA,KA4BoB,IAEU,EAFVH,EAAAA,EAAAA,IAEUuC,EAAA,CAFDqG,KAAK,OAAQ5H,QAAOE,EAAAoI,wB,CA5BjDpJ,SAAAC,EAAAA,EAAAA,KA6BwB,IAAe,EAAfH,EAAAA,EAAAA,IAAeuJ,MA7BvChI,EAAA,G,kBAAAA,EAAA,IAgCmDhB,EAAAiJ,wBAAqB,WAAxD5J,EAAAA,EAAAA,IAQM,MARNkD,GAQM,EAPF9C,EAAAA,EAAAA,IAKYoD,EAAA,CAtChCT,WAiCwCpC,EAAAkJ,aAjCxC,sBAAA1H,EAAA,KAAAA,EAAA,GAAAd,GAiCwCV,EAAAkJ,aAAYxI,GAAEqC,MAAM,OAAOnB,MAAM,MAAMC,OAAO,MACtDmB,QAAShD,EAAAkJ,aAlCzC,mBAAA1H,EAAA,KAAAA,EAAA,GAAAd,GAkCyCV,EAAAkJ,aAAYxI,GAAG,wBAAsB,EAAQ,yBAAuB,G,CAlC7Gf,SAAAC,EAAAA,EAAAA,KAmCwB,IAAwE,EAAxET,EAAAA,EAAAA,IAAwE,QAAxE8D,GAAwE,WACxExD,EAAAA,EAAAA,IAAoDwB,EAAA,CAAxCR,QAAOE,EAAAwI,mBAAiB,CApC5DxJ,SAAAC,EAAAA,EAAAA,KAoC8D,IAAE,EApChEiB,EAAAA,EAAAA,IAoC8D,SApC9DG,EAAA,G,gBAqCwBvB,EAAAA,EAAAA,IAAsEwB,EAAA,CAA3D/B,MAAM,eAAgBuB,QAAOE,EAAA0C,a,CArChE1D,SAAAC,EAAAA,EAAAA,KAqC6E,IAAK,EArClFiB,EAAAA,EAAAA,IAqC6E,YArC7EG,EAAA,G,kBAAAA,EAAA,G,gCAAAS,EAAAA,EAAAA,IAAA,YA4CQhC,EAAAA,EAAAA,IAAoC2J,EAAA,CAAxBhK,MAAA,oBAEZD,EAAAA,EAAAA,IAGM,MAHNqE,GAGM,WAFFrE,EAAAA,EAAAA,IACmC,YADzBkK,KAAK,IA/C3B,sBAAA7H,EAAA,KAAAA,EAAA,GAAAd,GA+CwCV,EAAAsJ,WAAU5I,GAAE6I,YAAY,UAAUrK,MAAM,gBAC/DsK,QAAKhI,EAAA,KAAAA,EAAA,IAhDtBiI,EAAAA,GAAAA,KAAA/I,GAgD8BC,EAAA+I,eAAW,a,kBADD1J,EAAAsJ,iBAIhCnK,EAAAA,EAAAA,IAOM,MAPNkG,GAOM,EANF5F,EAAAA,EAAAA,IAKYwB,EAAA,CALDC,KAAK,UAAUhC,MAAM,cAAeuB,QAAKe,EAAA,KAAAA,EAAA,GAAAd,GAAEC,EAAA+I,gB,CApDlE/J,SAAAC,EAAAA,EAAAA,KAsDgB,IAEU,EAFVH,EAAAA,EAAAA,IAEUuC,EAAA,CAFDqG,KAAK,QAAM,CAtDpC1I,SAAAC,EAAAA,EAAAA,KAuDoB,IAAa,EAAbH,EAAAA,EAAAA,IAAakK,MAvDjC3I,EAAA,OAAAA,EAAA,O,gBCEIiF,IAASC,EAAAA,EAAAA,IAAgB,CAC3BnF,KAAM,YAGR,MAAMzB,GAAa,CACjB6G,MAAO,6BACPC,QAAS,iBAEL7G,IAA6B8G,EAAAA,EAAAA,IAAY,OAAQ,CACrDC,KAAM,eACNC,EAAG,6HACF,MAAO,GACJ/G,IAA6B6G,EAAAA,EAAAA,IAAY,OAAQ,CACrDC,KAAM,eACNC,EAAG,wTACF,MAAO,GACV,SAASC,GAAOC,EAAMjF,EAAQO,EAAQ2E,EAAQ1G,EAAOW,GACnD,OAAOgG,EAAAA,EAAAA,OAAaC,EAAAA,EAAAA,IAAY,MAAOtH,GAAY,CACjDC,GACAC,IAEJ,CAEAyG,GAAOO,OAASA,GAChBP,GAAOY,OAAS,kCAEhB,UC1BIZ,IAASC,EAAAA,EAAAA,IAAgB,CAC3BnF,KAAM,cAGR,MAAMzB,GAAa,CACjB6G,MAAO,6BACPC,QAAS,iBAEL7G,IAA6B8G,EAAAA,EAAAA,IAAY,OAAQ,CACrDC,KAAM,eACNC,EAAG,0NACF,MAAO,GACV,SAASC,GAAOC,EAAMjF,EAAQO,EAAQ2E,EAAQ1G,EAAOW,GACnD,OAAOgG,EAAAA,EAAAA,OAAaC,EAAAA,EAAAA,IAAY,MAAOtH,GAAY,CACjDC,IAEJ,CAEA0G,GAAOO,OAASA,GAChBP,GAAOY,OAAS,oCAEhB,UCrBIZ,IAASC,EAAAA,EAAAA,IAAgB,CAC3BnF,KAAM,gBAGR,MAAMzB,GAAa,CACjB6G,MAAO,6BACPC,QAAS,iBAEL7G,IAA6B8G,EAAAA,EAAAA,IAAY,OAAQ,CACrDC,KAAM,eACNC,EAAG,oNACF,MAAO,GACV,SAASC,GAAOC,EAAMjF,EAAQO,EAAQ2E,EAAQ1G,EAAOW,GACnD,OAAOgG,EAAAA,EAAAA,OAAaC,EAAAA,EAAAA,IAAY,MAAOtH,GAAY,CACjDC,IAEJ,CAEA0G,GAAOO,OAASA,GAChBP,GAAOY,OAAS,sCAEhB,U,WH8CA,IACIC,WAAY,CACR8C,QAAO,GACPC,UAAS,GACTC,YAAW,GACXC,OAAMA,GAAAA,QAEV5C,MAAO,CACH7F,OAAQ,CACJJ,KAAM8I,OACN3C,UAAU,IAGlBlK,IAAAA,GACI,MAAO,CACHmM,WAAY,GACZW,OAAQxC,KAAKnG,OACb4H,cAAc,EACdgB,eAAe,EACfjB,uBAAuB,EACvBkB,OAAQ,KACRC,aAAa,EACbC,cAAe,KACfC,OAAQ,GACRC,MAAO,KAGf,EACA5C,QAAS,CACL,4BAAMoB,GAEFtB,KAAKyB,cAAe,EACpBzB,KAAKwB,uBAAwB,EAC7BxB,KAAK+C,WAAUC,UACX,IAEIhD,KAAK0C,aAAeO,UAAUC,aAAaC,aAAa,CAAEL,OAAO,IACjE9C,KAAKoD,MAAM,gCAGXpD,KAAK8C,MAAQ9C,KAAKqD,MAAMP,MAGxB9C,KAAK8C,MAAMQ,UAAYtD,KAAK0C,MAChC,CAAE,MAAOa,GACLvM,GAAAA,GAAUZ,MAAM,0BAA2BmN,EAC/C,IAER,EACA3H,WAAAA,GACQoE,KAAK0C,SAEL1C,KAAK0C,OAAOc,YAAYC,SAAQC,GAASA,EAAMC,SAC/C3D,KAAK0C,OAAS,MAEd1C,KAAK8C,QACL9C,KAAK8C,MAAMQ,UAAY,MAEvBtD,KAAK4D,IAAM5D,KAAK4D,GAAGC,aAAeC,UAAUC,MAC5C/D,KAAK4D,GAAGI,QAEZC,cAAcjE,KAAKkE,eACnBlE,KAAKyB,cAAe,EACpBzB,KAAKwB,uBAAwB,EAC7BxB,KAAKmE,eAGT,EAEAzC,iBAAAA,GAII1B,KAAK2C,aAAc,EACnB3C,KAAKyB,cAAe,EACpB,MAAM2C,EAASC,SAASC,cAAc,UAChCC,EAAUH,EAAOI,WAAW,MAClCJ,EAAOjK,MAAQ,IACfiK,EAAOhK,OAAS,IAEhB,MAAMqK,EAAiBA,KACnB,IAAKzE,KAAK2C,YAAa,OAEvB,GAAI3C,KAAK8C,MAAM4B,QAAU1E,KAAK8C,MAAM6B,MAChC,OAEJJ,EAAQK,UAAU5E,KAAK8C,MAAO,EAAG,EAAGsB,EAAOjK,MAAOiK,EAAOhK,QACzD,MAAMyK,EAAmBT,EAAOU,UAAU,aAAc,IACxD9E,KAAKoD,MAAM,OAAQ,QAASyB,GAG5BE,sBAAsBN,EAAe,EAIzCA,GACJ,EAEAO,YAAAA,GACQhF,KAAK0C,SACL1C,KAAK0C,OAAOc,YAAYC,SAAQC,GAASA,EAAMC,SAC/C3D,KAAK0C,OAAS,MAElB1C,KAAK+C,WAAUC,UACX,IACIhD,KAAK0C,aAAeO,UAAUC,aAAaC,aAAa,CAAEL,OAAO,IACjE9C,KAAK8C,MAAMQ,UAAYtD,KAAK0C,MAChC,CAAE,MAAOa,GACLvM,GAAAA,GAAUZ,MAAM,0BAA2BmN,EAC/C,IAGR,EAEAY,aAAAA,GACQnE,KAAK4C,eAAiB5C,KAAK2C,cAC3B3C,KAAK2C,aAAc,EACnB3C,KAAK4C,cAAce,OAEnB3D,KAAK6C,OAAS,GAEtB,EAEAZ,WAAAA,GAEIjC,KAAK6B,WAAa7B,KAAK6B,WAAWoD,OAE7BjF,KAAK6B,YAKV7B,KAAKoD,MAAM,OAAQ,OAAQpD,KAAK6B,YAChC7B,KAAK6B,WAAa,IALd7K,GAAAA,GAAUkO,QAAQ,SAM1B,EAEA/D,eAAAA,GACInB,KAAKqD,MAAM8B,UAAUC,OACzB,EACAvE,gBAAAA,GACIb,KAAKqD,MAAMgC,WAAWD,OAC1B,EACAlE,iBAAAA,CAAkBoE,GACd,MAAMC,EAAOD,EAAM9H,OAAOgI,MAAM,GAC5BD,GACAvF,KAAKyF,WAAWF,EAAM,QAE9B,EAEAlE,gBAAAA,CAAiBiE,GACb,MAAMC,EAAOD,EAAM9H,OAAOgI,MAAM,GAC3BD,GAKLvF,KAAKyF,WAAWF,EAAM,OAC1B,EAEA,gBAAME,CAAWF,EAAM9L,GAEnB,IACI,MAAMiM,EAAW,IAAIC,SACrBD,EAASE,OAAO,UAAW5F,KAAKwC,QAChCkD,EAASE,OAAO,OAAQL,GAExB,MAAM9O,QAAiB/B,EAAAA,EAAamR,KAAK,sBAAuBH,EAAU,CACtEtQ,QAAS,CACL,eAAgB,yBAIxB,GAA2B,IAAvBqB,EAASf,KAAKoQ,KAAY,CAGb9F,KAAKwC,OAEL/L,EAASf,KAAKA,KAAKqQ,UAEhC,GAAa,SAATtM,EACAuG,KAAKoD,MAAM,OAAQ,OAAQ3M,EAASf,KAAKA,KAAKqQ,UAAY,iCAAmCtP,EAASf,KAAKA,KAAKsQ,cAC7G,IAAa,UAATvM,EAGP,MAAM,IAAIwM,MAAM,kBAFhBjG,KAAKoD,MAAM,OAAQ,QAAS3M,EAASf,KAAKA,KAAKsQ,SAGnD,CACA,OAAOvP,EAASf,KAAKA,IACzB,CAEI,MAAM,IAAIuQ,MAAMxP,EAASf,KAAKwQ,KAAO,SAE7C,CAAE,MAAO9P,GACLY,GAAAA,GAAUZ,MAAM,yBAA0BA,EAC9C,CACJ,IIhQR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,WCNe,MAAM+P,GAOjBC,WAAAA,CAAY5Q,EAAK6Q,EAAOC,EAAUC,GAAY,GAC1CvG,KAAKxK,IAAMA,EAAM,iBAAmB6Q,EACpCrG,KAAKqG,MAAQA,EACbrG,KAAKsG,SAAWA,EAChBtG,KAAK4D,GAAK,KACV5D,KAAK3I,OAAS,EACd2I,KAAKwG,KAAO,IACZxG,KAAKyG,aAAe,KACpBzG,KAAK0G,UAAY,IACjB1G,KAAKuG,UAAYA,EACjBvG,KAAK2G,YAAc,IAAIC,YAAY,QACvC,CAKAC,OAAAA,GACI7G,KAAK4D,GAAK,IAAIE,UAAU9D,KAAKxK,KAE7BwK,KAAK4D,GAAGkD,OAAS,KACT9G,KAAK3I,OAAS,EACd2I,KAAK+G,cAAc,EAG3B/G,KAAK4D,GAAGoD,UAAajQ,IACb,GAAIiJ,KAAKuG,UAAW,CAChB,IAAI7Q,EAAOI,KAAKsB,MAAML,EAAErB,MAExB,GAAkB,IAAdA,EAAKoQ,KACL,IACIpQ,EAAKA,KAAKsH,QAAUiK,GAAAA,GAA2BnQ,QAAQpB,EAAKiB,QAAQjB,KAAMA,EAAKiB,QAAQV,SAC3F,CAAE,MAAOc,GACLC,GAAAA,GAAUZ,MAAM,iBACpB,CAEJ4J,KAAKsG,SAAS5Q,EAClB,MACIsK,KAAKsG,SAASxQ,KAAKsB,MAAML,EAAErB,MAC/B,EAGRsK,KAAK4D,GAAGsD,QAAWnQ,MAEnBiJ,KAAK4D,GAAGuD,QAAWpQ,IACfiJ,KAAKoH,QAAQrQ,EAAE,CAEvB,CAKAsQ,IAAAA,CAAK3R,GAUD,MAAMC,EAAK2R,GAAAA,GAA4BzR,QAAQH,EAAKsH,SAqBpD,OApBAtH,EAAKsH,QAAU,GACftH,EAAKiB,QAAU,CACXjB,KAAMC,EAAGK,WACTC,SAAUN,EAAGM,SACbC,IAAK,GACLC,OAAQ,GAeL6J,KAAK4D,GAAGyD,KAAKvR,KAAKC,UAAUL,GACvC,CAKAsO,KAAAA,GACIhE,KAAK3I,OAAS,EACd2I,KAAK4D,GAAGI,QACRC,cAAcjE,KAAKyG,aACvB,CAKAW,OAAAA,CAAQrQ,GACgB,IAAhBiJ,KAAK3I,SAGThB,QAAQD,MAAMW,GACdiJ,KAAK3I,OAAyB,IAAhB2I,KAAK3I,OAAe2I,KAAK3I,OAAS,EAChDkQ,YAAW,KACa,IAAhBvH,KAAK3I,QACL2I,KAAK6G,SACT,GACD7G,KAAK0G,WACZ,CAKAK,YAAAA,GACI,MAAMrR,EAAO,CACT8R,QAAS,EACT/N,KAAM,OACN/D,KAAM,IAEVsK,KAAKyG,aAAegB,aAAY,KACR,IAAhBzH,KAAK3I,OACL2I,KAAK4D,GAAGyD,KAAKvR,KAAKC,UAAUL,IAE5BuO,cAAcjE,KAAKyG,aACvB,GACDzG,KAAKwG,KACZ,E,UCvIK/O,MAAM,kBAAkB0C,MAAM,MAAMC,OAAO,O,IACpCF,IAAI,eAAezC,MAAM,gBAAgB0C,MAAM,MAAMC,OAAO,O,2CADxExC,EAAAA,EAAAA,IAGM,MAHNC,GAGM,EAFFH,EAAAA,EAAAA,IAAmF,SAAnFI,GAAmF,WACnFJ,EAAAA,EAAAA,IAAqC,UAA5BsB,QAAKe,EAAA,KAAAA,EAAA,OAAAkH,IAAE/H,EAAAwO,UAAAxO,EAAAwO,YAAAzG,KAAU,O,CAMlC,QACI3H,KAAM,aACNoG,MAAO,CACH7F,OAAQ,CACJJ,KAAM8I,OACN3C,UAAU,GAEdlE,WAAY,CACRjC,KAAMkO,OACN/H,UAAU,IAIlBgI,OAAAA,GACI5H,KAAK6H,yBACT,EACAnS,IAAAA,GACI,MAAO,CACHoS,eAAe,EACfC,cAAe,KACfC,YAAa,KACbC,aAAc,KACdC,MAAO,GAGf,EAEAC,MAAO,CACHzM,WAAY,CACR0M,MAAM,EACNC,OAAAA,CAAQC,EAAQC,GACPvI,KAAK8H,eACN9H,KAAK6H,0BAET7H,KAAKwI,gCAAgCF,EAEzC,GAEJ,eAAeG,GACPA,EAAY,GAAKzI,KAAK8H,eACtB9H,KAAK0I,cAEb,GAIJxI,QAAS,CACL2H,uBAAAA,GACI7H,KAAK+H,cAAgB/H,KAAKqD,MAAMsF,aAE3B3I,KAAK+H,cAIV/H,KAAK8H,eAAgB,EAHjB9Q,UAAUZ,MAAM,oCAIxB,EACAoS,+BAAAA,CAAgCI,GAC5B5I,KAAKkI,MAAM/Q,KAAKyR,EAEpB,EACAF,YAAAA,GAEI,IACI,MAAO1I,KAAKkI,MAAM/R,OAAS,EAAG,CAC1B,MAAMyS,EAAoB5I,KAAKkI,MAAMW,QAE/BC,EAAM,IAAIC,MAChBD,EAAIrM,IAAMmM,EACVE,EAAIE,OAAS,KACT,MAAM5E,EAASpE,KAAK+H,cACdkB,EAAM7E,EAAOI,WAAW,MAC9ByE,EAAIrE,UAAUkE,EAAK,EAAG,EAAG1E,EAAOjK,MAAOiK,EAAOhK,OAAO,CAE7D,CACJ,CAAE,MAAOhE,GACLY,UAAUZ,MAAM,0BAA2BA,EAC/C,CAEJ,EAEAsR,QAAAA,GAEI1H,KAAKoD,MAAM,eAEXpD,KAAKkI,MAAQ,GACblI,KAAK+H,cAAgB,KACrB/H,KAAK8H,eAAgB,EACrB9H,KAAKkJ,IAAIC,SACTnJ,KAAKoD,MAAM,8BAEf,IC5FR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,iECJiB3L,MAAM,sB,YAQPC,EAAAA,EAAAA,IAEM,OAFDD,MAAM,oBAAkB,EACzBC,EAAAA,EAAAA,IAAiB,YAAX,UAAI,K,YAStBA,EAAAA,EAAAA,IAAO,oB,YAICA,EAAAA,EAAAA,IAEM,OAFDD,MAAM,eAAa,EACpBC,EAAAA,EAAAA,IAAiB,YAAX,UAAI,K,IAQJC,MAAA,gC,kOAjCtBe,EAAAA,EAAAA,IA8CY0Q,EAAA,CA9CD,gBAAW5O,OAAA,GAAOoG,KAAK,S,CACnBjD,QAAMxF,EAAAA,EAAAA,KACb,IAGM,EAHNT,EAAAA,EAAAA,IAGM,MAHNG,GAGM,EAFFH,EAAAA,EAAAA,IAA4B,WAAA2B,EAAAA,EAAAA,IAArBiB,EAAAD,SAASf,MAAI,IACpBtB,EAAAA,EAAAA,IAA6FuC,EAAA,CAApF5C,MAAA,iCAAwCqB,QAAOE,EAAAmQ,mB,CAPxEnR,SAAAC,EAAAA,EAAAA,KAO2F,IAAQ,EAARH,EAAAA,EAAAA,IAAQsR,MAPnG/P,EAAA,G,oBA6CmBgQ,QAAMpR,EAAAA,EAAAA,KACb,IAA6D,EAA7DH,EAAAA,EAAAA,IAA6DwB,EAAA,CAAlDC,KAAK,SAAUT,QAAOE,EAAAsQ,Y,CA9C7CtR,SAAAC,EAAAA,EAAAA,KA8CyD,IAAI,EA9C7DiB,EAAAA,EAAAA,IA8CyD,WA9CzDG,EAAA,G,kBAAArB,SAAAC,EAAAA,EAAAA,KAWQ,IAUU,EAVVH,EAAAA,EAAAA,IAUUyR,EAAA,CAVD9R,MAAA,uBAAwB,CAClBgG,QAAMxF,EAAAA,EAAAA,KACb,IAEM,CAFNL,MAKOyR,QAAMpR,EAAAA,EAAAA,KACb,IAAiG,EAAjGH,EAAAA,EAAAA,IAAiGwB,EAAA,CAAtFC,KAAK,UAAUhC,MAAM,oBAAqBuB,QAAOE,EAAAwQ,mB,CAnB5ExR,SAAAC,EAAAA,EAAAA,KAmB+F,IAAM,EAnBrGiB,EAAAA,EAAAA,IAmB+F,aAnB/FG,EAAA,G,kBAAArB,SAAAC,EAAAA,EAAAA,KAiBY,IAAiC,EAAjCT,EAAAA,EAAAA,IAAiC,UAAA2B,EAAAA,EAAAA,IAA3BiB,EAAAD,SAASsP,aAAW,MAjBtCpQ,EAAA,IAuBQxB,IAEAC,EAAAA,EAAAA,IAkBUyR,EAAA,CAlBD9R,MAAA,uBAAwB,CAClBgG,QAAMxF,EAAAA,EAAAA,KACb,IAEM,CAFNwB,MAYO4P,QAAMpR,EAAAA,EAAAA,KACb,IAA8D,EAA9DH,EAAAA,EAAAA,IAA8DwB,EAAA,CAAnDC,KAAK,UAAWT,QAAOE,EAAA0Q,Y,CAxClD1R,SAAAC,EAAAA,EAAAA,KAwC8D,IAAI,EAxClEiB,EAAAA,EAAAA,IAwC8D,WAxC9DG,EAAA,G,kBAAArB,SAAAC,EAAAA,EAAAA,KAiCY,IAKS,EALTH,EAAAA,EAAAA,IAKS6R,EAAA,MAtCrB3R,SAAAC,EAAAA,EAAAA,KAkCwB,IAAyB,gBAAjCP,EAAAA,EAAAA,IAGSS,EAAAA,GAAA,MArCzBC,EAAAA,EAAAA,IAkCuCC,EAAAuR,WAARC,K,WAAfrR,EAAAA,EAAAA,IAGSsR,EAAA,CAH0BnR,IAAKkR,EAAK9P,GAAKgQ,KAAM,GAAItS,MAAA,wD,CAlC5EO,SAAAC,EAAAA,EAAAA,KAmCoB,IAAgE,EAAhEH,EAAAA,EAAAA,IAAgEuE,EAAA,CAApDE,IAAKvD,EAAAgR,UAAUH,EAAKzJ,QAAUM,KAAM,I,iBAChDlJ,EAAAA,EAAAA,IAAqE,OAArEmD,IAAqExB,EAAAA,EAAAA,IAAvB0Q,EAAKI,UAAQ,MApC/E5Q,EAAA,G,kBAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,G,gBA2DA,IACID,KAAM,aACNoG,MAAO,CACH7F,OAAQ,CACJJ,KAAM8I,OACN3C,UAAU,GAEdvF,SAAU,CACNZ,KAAMkG,OACNC,UAAU,IAGlBlK,IAAAA,GACI,MAAO,CACHoU,UAAW,GAEnB,EACA3B,MAAO,CACHtO,MAAAA,GACImG,KAAKoK,gBACT,GAEJC,OAAAA,GACIrK,KAAKoK,gBACT,EACAlK,QAAS,CAELmJ,iBAAAA,GACIiB,GAAAA,EAAaC,OACL,YACA,SACA,CACIC,WAAYxK,KAAK3F,SAASf,KAC1BmR,kBAAmB,KACnBC,iBAAkB,KAClBC,aAAc,KACdC,kBAAmB,aAE7BC,MAAK,EAAGC,YACN,IAAKA,EAED,YADA9T,GAAAA,GAAUZ,MAAM,YAIpB,MAAM2U,EAAc/K,KAAK3F,SACzB0Q,EAAYzR,KAAOwR,EACnB9K,KAAKgL,eAAeD,EAAY,IACjCE,OAAM,KACLjU,GAAAA,GAAUkU,KAAK,OAAO,GAE9B,EACAxB,iBAAAA,GACIY,GAAAA,EAAaC,OACL,YACA,SACA,CACIC,WAAYxK,KAAK3F,SAASsP,YAC1Bc,kBAAmB,KACnBC,iBAAkB,KAClBS,UAAW,WACXR,aAAc,KACdC,kBAAmB,aAE7BC,MAAK,EAAGC,YACN,IAAKA,EAED,YADA9T,GAAAA,GAAUZ,MAAM,YAIpB,MAAM2U,EAAc/K,KAAK3F,SACzB0Q,EAAYpB,YAAcmB,EAC1B9K,KAAKgL,eAAeD,EAAY,IACjCE,OAAM,KACLjU,GAAAA,GAAUkU,KAAK,OAAO,GAE9B,EACAtB,UAAAA,GACIU,GAAAA,EAAaC,OACL,aACA,OACA,CACIE,kBAAmB,KACnBC,iBAAkB,KAClBS,UAAW,WACXP,kBAAmB,aAE7BC,MAAK,EAAGC,YACDA,EAKL9K,KAAKoL,QAAQN,GAJT9T,GAAAA,GAAUZ,MAAM,WAID,IACpB6U,OAAM,KACLjU,GAAAA,GAAUkU,KAAK,OAAO,GAE9B,EACA,oBAAMF,CAAeD,GACjB,IACI,MAAMtU,QAAiB/B,EAAAA,EAAamR,KAAK,mBACrC,CACI,QAAW7F,KAAKnG,OAChB,KAAQkR,EAAYzR,KACpB,YAAeyR,EAAYpB,cAGnC,GAA2B,IAAvBlT,EAASf,KAAKoQ,KAEd,OADA9O,GAAAA,GAAUZ,MAAMK,EAASf,KAAKwQ,MACvB,EAEXlP,GAAAA,GAAUqU,QAAQ,QAClBrL,KAAKoD,MAAM,kBAAmB2H,GAC9B/K,KAAKoD,MAAM,mBAAmB,EAClC,CAAE,MAAOhN,GAEL,OADAY,GAAAA,GAAUZ,MAAM,8BAA+BA,IACxC,CACX,CACA,OAAO,CACX,EACA,aAAMgV,CAAQ9R,GACV,IACI,MAAM7C,QAAiB/B,EAAAA,EAAamR,KAAK,qBACrC,CACI,QAAW7F,KAAKnG,OAChB,UAAaP,EACb,KAAQ,WAGhB,GAA2B,IAAvB7C,EAASf,KAAKoQ,KAEd,OADA9O,GAAAA,GAAUZ,MAAMK,EAASf,KAAKwQ,MACvB,QAELlG,KAAKoK,gBACf,CAAE,MAAOhU,GAEL,OADAY,GAAAA,GAAUZ,MAAM,UACT,CACX,CAEA,OADAY,GAAAA,GAAUqU,QAAQ,SACX,CACX,EACA,gBAAM7B,GACF,IACI,MAAM/S,QAAiB/B,EAAAA,EAAa4W,OAChC,4BAA8BtL,KAAKnG,QAEvC,GAA2B,IAAvBpD,EAASf,KAAKoQ,KAEd,OADA9O,GAAAA,GAAUZ,MAAMK,EAASf,KAAKwQ,MACvB,EAGXlG,KAAKoD,MAAM,mBAAmB,GAC9BpM,GAAAA,GAAUqU,QAAQ,SACtB,CAAE,MAAOjV,GACL,OAAO,CACX,CACJ,EACA,oBAAMgU,GAEF,IACI,MAAM3T,QAAiB/B,EAAAA,EAAa6W,IAAI,6BAA+BvL,KAAKnG,QAEjD,IAAvBpD,EAASf,KAAKoQ,KACd9F,KAAK8J,UAAYrT,EAASf,KAAKA,KAE/BsB,GAAAA,GAAUZ,MAAMK,EAASf,KAAKwQ,IAEtC,CAAE,MAAO9P,GACLY,GAAAA,GAAUZ,MAAM,aACpB,CAGJ,EACA8T,SAAAA,CAAU1U,GACN,OAAIA,EACOV,EAAAA,EAAiBU,EAEjBV,EAAAA,EAAiB,2BAEhC,ICtOR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,Ub4CA,IACIwE,KAAM,WACNoG,MAAO,CACH7F,OAAQ,CACJJ,KAAM8I,OACN3C,UAAU,GAEd9F,sBAAuB,CACnBL,KAAM+R,UAGdnM,WAAY,CACRoM,WAAU,GACVC,YAAW,GACXC,UAAS,GACTC,WAAUA,IAEdlW,IAAAA,GACI,MAAO,CACH2E,SAAU,CAAC,EACXY,SAAU,GACV4G,WAAY,GAEZ+B,GAAI,IAAIuC,GACJ0F,EAAAA,EACAvW,aAAaC,QAAQ,SACrByK,KAAK8L,eACL,GAEJtR,QAAQ,EACRI,UAAU,EACVmR,YAAa,KACb/D,YAAa,IAAIgE,YACjB/D,aAAc,GACd5M,qBAAqB,EACrB4Q,YAAa,GACbvQ,WAAY,KACZwQ,aAAc,KACdC,cAAe,EACfC,OAAQ,KACRC,UAAW,GACXC,kBAAkB,EAE1B,EACAjC,OAAAA,GACIrK,KAAKuM,mBAAmB,EAAG,IAC3BvM,KAAKwM,gBACLxM,KAAK4D,GAAGiD,UAGR,MAAM/G,EAASxK,aAAaC,QAAQ,UAC9B4U,EAAW7U,aAAaC,QAAQ,QAClCuK,GAAUqK,EACVnK,KAAK+L,YAAc,CACfU,QAAS3W,KAAKsB,MAAM0I,GACpBqK,SAAUrU,KAAKsB,MAAM+S,GACrB7J,OAAQ,oCAIZN,KAAK9I,QAAQC,KAAK,SAE1B,EACAgR,MAAO,CACHtO,MAAAA,GACImG,KAAK/E,SAAW,GAChB+E,KAAKuM,mBAAmB,EAAG,IAC3BvM,KAAKwM,eACT,EACAvR,SAAU,CACNmN,MAAM,EACNC,OAAAA,GACIrI,KAAK0M,kBACT,GAEJ9R,QAAAA,GACQoF,KAAKpF,WACLoF,KAAKoD,MAAM,gCAAgC,GAC3CpD,KAAKpF,UAAW,EAExB,GAEJgN,OAAAA,GACI5H,KAAK2M,gBACT,EACAC,aAAAA,GACI5M,KAAK4D,GAAGI,OACZ,EACA9D,QAAS,CAILsM,aAAAA,GACI9X,EAAAA,EAAa6W,IAAK,0BAAyBvL,KAAKnG,UAAUgR,MAAKpU,IAChC,IAAvBA,EAASf,KAAKoQ,KACd9F,KAAK3F,SAAW5D,EAASf,KAAKA,KAE9BsB,GAAAA,GAAUZ,MAAM,YAAaK,EAASf,KAAKwQ,IAC/C,IACD+E,OAAM7U,IACLY,GAAAA,GAAUZ,MAAM,YAAaA,EAAM,GAE3C,EAEA0V,aAAAA,CAAc5Q,GAEV,GAAqB,IAAjBA,EAAQ4K,KAAY,CACpB,GAAI5K,EAAQxF,KAAK8R,UAAYxH,KAAKnG,OAC9B,OAGJqB,EAAQxF,KAAKoI,YAAc5C,EAAQvE,QACnCuE,EAAQxF,KAAKoI,YAAYjF,IAAMvD,aAAaC,QAAQ,4BAC1B,UAAtB2F,EAAQxF,KAAK+D,MACiB,IAA1BuG,KAAKsM,mBACLtM,KAAK3E,qBAAsB,EAC3B2E,KAAK6M,yBAAyB3R,EAAQxF,KAAKsH,UAK/CgD,KAAK/E,SAAS9D,KAAK+D,EAAQxF,KAEnC,MAA4B,IAAjBwF,EAAQ4K,KACf9O,GAAAA,GAAUZ,MAAM,UAAW8E,EAAQgL,KACX,IAAjBhL,EAAQ4K,MAGf9O,GAAAA,GAAUZ,MAAM,UAAW8E,EAEnC,EAEAgB,mBAAAA,CAAoBzC,EAAMyB,GAItB8E,KAAK4D,GAAGyD,KAAK,CACTG,QAASxH,KAAKnG,OACdJ,KAAMA,EACNuD,QAAS9B,GAEjB,EACA2R,wBAAAA,CAAyBjE,GACrB5I,KAAKiM,YAAY9U,KAAKyR,GACtB5I,KAAKtE,WAAakN,CACtB,EAEA,wBAAM2D,CAAmBO,EAAeC,GACpC,IACI,MAAMtW,QAAiB/B,EAAAA,EAAamR,KAChC,oBACA,CACI,QAAW7F,KAAKnG,OAChB,gBAAmBiT,EACnB,MAASC,IAEjB,GAAkC,IAA9BtW,EAASf,KAAKA,KAAKS,OAEnB,YADAa,GAAAA,GAAUkU,KAAK,aAGnBzU,EAASf,KAAKA,KAAK+N,SAAQuJ,IACvBA,EAAKlP,YAAcrH,EAASf,KAAKiB,QACjCqW,EAAKlP,YAAYjF,IAAMvD,aAAaC,QAAQ,kBAAkB,IAIlEyK,KAAK/E,SAAW,IAAIxE,EAASf,KAAKA,KAAKuX,aAAcjN,KAAK/E,SAC9D,CAAE,MAAO7E,GACLY,GAAAA,GAAUZ,MAAM,4BAA6BA,EACjD,CACJ,EAEA4E,sBAAAA,GACI,GAA6B,IAAzBgF,KAAK/E,SAAS9E,OAEd,YADAa,GAAAA,GAAUkU,KAAK,aAGnB,GAAIlL,KAAK/E,SAAS+E,KAAK/E,SAAS9E,OAAS,GAAG2C,IAAM,EAE9C,YADA9B,GAAAA,GAAUkU,KAAK,aAGnB,MAAMgC,EAAeC,KAAKC,OAAOpN,KAAK/E,SAASoS,KAAIL,GAAQA,EAAKlU,MAChEkH,KAAKuM,mBAAmBW,EAAc,GAC1C,EAEAP,cAAAA,GACI3M,KAAK+C,WAAU,KACX,MAAMuK,EAAYtN,KAAKqD,MAAMkK,UAAUrE,IAAIsE,cAAc,uBACzDF,EAAUG,UAAYH,EAAUI,YAAY,IAEhD1N,KAAKqD,MAAMkK,UAAUI,aACjB,CAAEC,UAAW,SAAUpQ,OAAQwC,KAAKqD,MAAMkK,UAAUrE,IAAIsE,cAAc,wBAE9E,EAEAK,UAAAA,GACI,MAAMP,EAAYtN,KAAKqD,MAAMkK,UAAUrE,IAAIsE,cAAc,uBAEzD,OAAOF,EAAUG,UAAYH,EAAUQ,aAAe,IAAMR,EAAUI,YAE1E,EAEAhB,gBAAAA,GACQ1M,KAAK6N,cACL7N,KAAK2M,gBAEb,EACA/Q,WAAAA,GACIoE,KAAKqD,MAAMsI,UAAU/P,cACrBoE,KAAK3E,qBAAsB,CAC/B,EACAe,4BAAAA,GACI4D,KAAKsM,kBAAmB,CAC5B,EACAxQ,2BAAAA,GACIkE,KAAKsM,kBAAmB,CAC5B,IctQR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Uf8BA,IACI5W,IAAAA,GACI,MAAO,CACH8C,MAAO,GACPuV,WAAY,KACZnV,aAAc,KACdkB,uBAAuB,EAE/B,EACAuF,WAAY,CACR2O,SAAQA,IAEZ7F,MAAO,CACH8F,OAAAA,GACIjO,KAAKkO,eACLlO,KAAKxF,QAAS,EACdwF,KAAKiO,SAAU,CACnB,EACAF,UAAAA,CAAWI,EAAUC,GACjBpO,KAAK+N,WAAaI,CACtB,EACArU,qBAAAA,GACIkG,KAAKqO,YACT,GAEJhE,OAAAA,GACIrK,KAAKqO,YAET,EACAC,WAAAA,GACItO,KAAKuO,oBACT,EACArO,QAAS,CACLqO,kBAAAA,GAEI,MAAMR,EAAa/N,KAAKwO,OAAOC,QAAQC,cACvCrY,QAAQC,IAAI,sBAAuByX,GAC/BA,GACA/N,KAAKpH,aAAemV,EAAWjV,GAC/BkH,KAAKlG,uBAAwB,EAC7BkG,KAAKwO,OAAOG,OAAO,oBAEnB3O,KAAKkO,cAEb,EACAA,YAAAA,GACIlO,KAAK+N,WAAa,KAClB/N,KAAKpH,aAAe,KACpBoH,KAAKqO,YACT,EACA3U,aAAAA,GACI4Q,GAAAA,EAAaC,OAAO,UAAW,SAASM,MAAK,EAAEC,YACtCA,EAKD9K,KAAK4O,WAAW9D,GAChB9T,GAAAA,GAAUqU,QAAQ,QAElBrU,GAAAA,GAAUZ,MAAM,QAPhBY,GAAAA,GAAUZ,MAAM,WAQpB,IACD6U,OAAM,KACLjU,GAAAA,GAAUkU,KAAK,OAAO,GAE9B,EACA,gBAAM0D,CAAWtV,GACb,IACI,MAAM7C,QAAiB/B,EAAAA,EAAamR,KAAK,mBACjC,CACI,KAAQvM,EACR,YAAe,KAG3B,GAA2B,IAAvB7C,EAASf,KAAKoQ,KACd,OAAO,QAEL9F,KAAKqO,YAGf,CAAE,MAAOjY,GACL,OAAO,CACX,CACA,OAAO,CACX,EACA,gBAAMiY,GACF,IACI,MAAM5X,QAAiB/B,EAAAA,EAAa6W,IAC5B,kBAERvL,KAAKxH,MAAQ/B,EAASf,KAAKA,KACvBsK,KAAKlG,wBACLkG,KAAKlG,uBAAwB,EAEzBkG,KAAKxH,MAAMqW,MAAKpW,GAAQA,EAAKK,KAAOkH,KAAKpH,eACzCoH,KAAK7G,cAAc6G,KAAKpH,eAExBoH,KAAK+N,WAAa,KAClB/N,KAAKpH,aAAe,MAGhC,CAAE,MAAOxC,GACLY,GAAAA,GAAUZ,MAAM,yBAA0BA,EAC9C,CACJ,EACA,mBAAM+C,CAAcc,GAChB+F,KAAK+N,WAAa/N,KAAKxH,MAAMqW,MAAKpW,GAAQA,EAAKK,KAAOmB,IACtD+F,KAAKpH,aAAeqB,CAExB,IgB7IR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS8E,GAAQ,CAAC,YAAY,qBAEzF,S","sources":["webpack://imvue/./src/utils/axios-config.js","webpack://imvue/./src/components/IM/Room/RoomList.vue","webpack://imvue/./src/components/IM/Room/RoomChat.vue","webpack://imvue/./src/components/IM/Room/MessageItem.vue","webpack://imvue/./node_modules/@element-plus/icons/es/Link.js","webpack://imvue/./src/components/IM/Room/MessageItem.vue?0774","webpack://imvue/./src/components/IM/Room/ChatInput.vue","webpack://imvue/./node_modules/@element-plus/icons/es/Picture.js","webpack://imvue/./node_modules/@element-plus/icons/es/FolderAdd.js","webpack://imvue/./node_modules/@element-plus/icons/es/VideoCamera.js","webpack://imvue/./src/components/IM/Room/ChatInput.vue?b571","webpack://imvue/./src/utils/websocket.js","webpack://imvue/./src/components/IM/Room/LiveStream.vue","webpack://imvue/./src/components/IM/Room/LiveStream.vue?e784","webpack://imvue/./src/components/IM/Room/RoomDrawer.vue","webpack://imvue/./src/components/IM/Room/RoomDrawer.vue?f5e3","webpack://imvue/./src/components/IM/Room/RoomChat.vue?7e3b","webpack://imvue/./src/components/IM/Room/RoomList.vue?db9c"],"sourcesContent":["import axios from 'axios';\nimport { ElMessage } from \"element-plus\";\nimport {userCipherFrontend, userCipherBackend} from \"@/utils/encrypt\";\nimport {backendBaseUrl} from \"@/utils/base-url-setting\";\n\nconst axios_config = axios.create({\n    baseURL: backendBaseUrl,\n    timeout: 10000\n})\n\n// 设置Axios的请求拦截器\naxios_config.interceptors.request.use(\n    config => {\n        config.headers.Authorization = `Bearer ${localStorage.getItem('token')}`;\n\n        // 如果访问路径中包含upload，则不进行Base64编码\n        if (!config.url.includes('upload')) {\n            if (config.data) {\n                // 将请求数据 config.data 进行加密\n                const dd = userCipherFrontend.encrypt(JSON.stringify(config.data));\n                // config.data中存储数据格式为：\n                // {\n                //     data: '加密后的数据',\n                //     pos: '加密位置',\n                //     mac: '',\n                //     length: ''\n                // }\n                config.data = {\n                    data: dd.cipherText,\n                    position: dd.position,\n                    mac: '',\n                    length: 0\n                };\n            }\n        }\n        return config;\n    },\n    error => {\n        console.log('request error', error);\n        return Promise.reject(error);\n    }\n);\n\n// 设置Axios的响应拦截器\n// 如果token过期（返回401），则跳转到登录页面\naxios_config.interceptors.response.use(\n    response => {\n        // return response;\n        // 将相应数据 response.data.data 进行Base64解码（使用UTF-8）\n        if (response.data.data) {\n            const encryptedData = response.data.en_data.data;\n            const position = response.data.en_data.position;\n            let decryptedData = '';\n            try{\n                decryptedData = userCipherBackend.decrypt(encryptedData, position);\n            } catch (e) {\n                ElMessage.error('解密失败，请重新登录获取密钥');\n                localStorage.clear();\n                this.$router.push('/login');\n            }\n            response.data.data = JSON.parse(decryptedData);\n        }\n        return response;\n    },\n    error => {\n        console.log('error', error)\n        if (error.response.status === 401) {\n            ElMessage.error('登录无效或过期，请重新登录');\n            localStorage.clear();\n            window.location.href = '/login';\n        }\n        return Promise.reject(error);\n    }\n);\n\n\nexport default axios_config\n","<!-- /src/components/IM/Room/RoomList.vue -->\n\n<template>\n    <div class=\"chatroom-container\">\n        <div class=\"chat-list\">\n            <h2 style=\"padding-left: 20px\">通信列表</h2>\n\n            <el-menu class=\"el-menu-rooms\">\n                <el-scrollbar wrap-class=\"scrollbar-wrapper\">\n                    <el-menu-item\n                            :default-active=\"activeRoomId\"\n                            class=\"el-menu-item-button\"\n                            v-for=\"room in rooms\"\n                            :key=\"room.ID\"\n                            :index=\"room.ID\"\n                            @click=\"activeOneRoom(room.ID)\">\n                        {{ room.name }}\n                    </el-menu-item>\n                </el-scrollbar>\n            </el-menu>\n            <el-button\n                    type=\"primary\"\n                    class=\"new-chat-button\"\n                    @click=\"createRoomBox\">\n                创建新通讯\n            </el-button>\n        </div>\n        <div class=\"chat-details\">\n            <RoomChat v-if=\"activeRoomId\" :roomID=\"activeRoomId\" v-model:ifUpdateRoomList2Chat=\"ifUpdateRoomList2Chat\"/>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios_config from \"@/utils/axios-config\";\nimport RoomChat from \"@/components/IM/Room/RoomChat.vue\";\nimport {ElMessage, ElMessageBox} from \"element-plus\";\n// import store from '@/store/store';\n\nexport default {\n    data() {\n        return {\n            rooms: [], // 存储聊天室列表\n            activeRoom: null, // 当前激活的聊天室详情\n            activeRoomId: null, // 当前激活的聊天室ID\n            ifUpdateRoomList2Chat: false,\n        };\n    },\n    components: {\n        RoomChat,\n    },\n    watch: {\n        ifFetch() {\n            this.selectNoRoom();\n            this.drawer = false;\n            this.ifFetch = false;\n        },\n        activeRoom(newValue, oldValue) {\n            this.activeRoom = newValue;\n        },\n        ifUpdateRoomList2Chat() {\n            this.fetchRooms();\n        },\n    },\n    created() {\n        this.fetchRooms(); // 获取聊天室列表\n        // this.jumpFromFriendChat();\n    },\n    beforeMount() {\n        this.jumpFromFriendChat();\n    },\n    methods: {\n        jumpFromFriendChat(){\n            // 从Vuex获取当前激活的聊天室ID\n            const activeRoom = this.$store.getters.getActiveRoom;\n            console.log(\"jumpFromFriendChat:\", activeRoom);\n            if (activeRoom) {\n                this.activeRoomId = activeRoom.ID;\n                this.ifUpdateRoomList2Chat = true;\n                this.$store.commit('clearActiveRoom')\n            } else {\n                this.selectNoRoom();\n            }\n        },\n        selectNoRoom() {\n            this.activeRoom = null;\n            this.activeRoomId = null;\n            this.fetchRooms();\n        },\n        createRoomBox() {\n            ElMessageBox.prompt('请输入通讯名称', '创建新通讯').then(({value}) => {\n                if (!value) {\n                    ElMessage.error('通讯名称不能为空');\n                    return;\n                }\n                // 创建新通讯\n                if (this.createRoom(value)) {\n                    ElMessage.success('创建成功');\n                } else {\n                    ElMessage.error('创建失败');\n                }\n            }).catch(() => {\n                ElMessage.info('取消创建');\n            });\n        },\n        async createRoom(name) {\n            try {\n                const response = await axios_config.post('/api/room/create',\n                        {\n                            'name': name,\n                            'description': ''\n                        },\n                );\n                if (response.data.code !== 0) {\n                    return false;\n                }\n                await this.fetchRooms(); // 创建成功后刷新通讯列表\n                // 创建成功后激活新通讯：无法实现，element-plus的el-menu-item无法通过代码激活\n                // await this.activeOneRoom(response.data.data.ID);\n            } catch (error) {\n                return false;\n            }\n            return true;\n        },\n        async fetchRooms() {\n            try {\n                const response = await axios_config.get(\n                        '/api/room/list',\n                );\n                this.rooms = response.data.data; // 假设返回的数据是聊天室数组\n                if (this.ifUpdateRoomList2Chat) {\n                    this.ifUpdateRoomList2Chat = false;\n                    // 如果当前选中的聊天室仍在列表中，则重新获取聊天室信息，并选定当前聊天室不变\n                    if (this.rooms.find(room => room.ID === this.activeRoomId)) {\n                        this.activeOneRoom(this.activeRoomId);\n                    } else {\n                        this.activeRoom = null;\n                        this.activeRoomId = null;\n                    }\n                }\n            } catch (error) {\n                ElMessage.error('Failed to fetch rooms:', error);\n            }\n        },\n        async activeOneRoom(id) {\n            this.activeRoom = this.rooms.find(room => room.ID === id);      // 假设返回的数据是聊天室详情\n            this.activeRoomId = id;                                         // 更新当前激活的聊天室ID\n            // store.commit('setActiveRoom', this.activeRoom);\n        },\n    }\n};\n</script>\n\n<style scoped>\n.chatroom-container {\n    display: flex;\n    height: 100%;\n    overflow-y: hidden;\n}\n\n.chat-list {\n    padding: 20px;\n    width: 200px;\n    display: flex;\n    flex-direction: column;\n    border-right: 1px solid #ffffff;\n    background: linear-gradient(180deg, #f0edf7 .03%, #ebeaf5 32.19%, #e8e8f3 68.86%, #e4eaf7 99.12%);\n}\n\n.chat-details {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n}\n\n.new-chat-button {\n    margin: 20px;\n    height: 40px;\n    background: linear-gradient(135deg, #897dfb, #3471f6);\n    border: none;\n}\n\n.el-menu-rooms {\n    border: none;\n    overflow-y: auto;\n    background: none;\n}\n\n.el-menu-item-button {\n    background: none;\n    border-bottom: #333333 1px;\n    border-radius: 10px;\n}\n\n.el-menu-item-button:hover {\n    background: #ffffff;\n}\n\n\n</style>\n","<template>\n    <div class=\"chat-details\">\n        <div class=\"chat-header\">\n            <p class=\"room-title\"> {{ roomInfo.name }} </p>\n            <el-icon v-if=\"roomID\" @click=\"drawer=true\" class=\"more-icon\">\n                <More/>\n            </el-icon>\n        </div>\n        <RoomDrawer v-if=\"roomID\"\n                    v-model=\"drawer\"\n                    v-model:ifUpdate=\"ifUpdate\"\n                    v-model:roomInfo=\"roomInfo\"\n                    :roomID=\"roomID\"/>\n\n        <div class=\"chat-box\" id=\"chat-box\">\n            <div class=\"chat-messages\" ref=\"messageContainer\" id=\"message-box\">\n                <!-- <p>消息内容将在这里显示 {{ roomID }} </p> -->\n                <el-scrollbar ref=\"scrollbar\">\n                    <div ref=\"inner\" class=\"message-inner-list\">\n                        <el-button type=\"text\" link @click=\"getMoreHistoryMessages\" style=\"margin: 9px\">\n                            加载更多历史消息\n                        </el-button>\n                        <MessageItem v-for=\"(message, index) in messages\" :key=\"index\" :message=\"message\"\n                                     class=\"message\"/>\n                    </div>\n                </el-scrollbar>\n            </div>\n\n            <el-dialog v-model=\"recieveVideoVisible\" title=\"视频聊天室\" width=\"680\" height=\"480\"\n                       v-model:visible=\"recieveVideoVisible\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\n                <div class=\"video-container\" width=\"640\" height=\"500\" v-if=\"recieveVideoVisible\">\n                <LiveStream :roomID=\"roomID\" :VideoChunk=\"VideoChunk\" @closeCamera=\"closeCamera\" @ForceforceDeleteVideoBeTrue=\"ForceforceDeleteVideoBeTrue\" />\n                </div>\n            </el-dialog>\n\n            <div class=\"input-box\" id=\"input-box\">\n            <ChatInput ref=\"ChatInput\" :roomID=\"roomID\" @send=\"sendMessageToParent\" @ForceforceDeleteVideoBeFalse=\"ForceforceDeleteVideoBeFalse\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios_config from \"@/utils/axios-config\";\nimport MessageItem from \"@/components/IM/Room/MessageItem.vue\";\nimport ChatInput from \"@/components/IM/Room/ChatInput.vue\";\nimport { ElMessage } from \"element-plus\";\nimport WebsocketClass from \"@/utils/websocket\";\n// import { createFFmpeg, fetchFile, FFmpeg } from \"@ffmpeg/ffmpeg\";\nimport LiveStream from \"@/components/IM/Room/LiveStream.vue\"\nimport { wsBaseUrl } from \"@/utils/base-url-setting\";\nimport RoomDrawer from \"@/components/IM/Room/RoomDrawer.vue\";\n\nexport default {\n    name: 'RoomChat',\n    props: {\n        roomID: {\n            type: Number,\n            required: true\n        },\n        ifUpdateRoomList2Chat: {\n            type: Boolean,\n        },\n    },\n    components: {\n        RoomDrawer,\n        MessageItem,\n        ChatInput,\n        LiveStream\n    },\n    data() {\n        return {\n            roomInfo: {},\n            messages: [], // 用于存储消息列表\n            newMessage: '', // 用于绑定输入框的内容\n            // WebSocket 对象\n            ws: new WebsocketClass(\n                wsBaseUrl,\n                localStorage.getItem('token'),\n                this.addNewMessage,\n                true,\n            ),\n            drawer: false,\n            ifUpdate: false,\n            currentUser: null, // 当前用户信息\n            mediaSource: new MediaSource(),\n            sourceBuffer: [],\n            recieveVideoVisible: false,\n            VideoChunks: [],\n            VideoChunk: null,\n            videoElement: null,\n            videoDuration: 0,\n            ffmpeg: null,\n            videoTime: 10,\n            forceDeleteVideo: false,\n        };\n    },\n    created() {\n        this.getHistoryMessages(0, 10); // 组件创建时调用获取历史消息函数\n        this.fetchRoomInfo();\n        this.ws.connect();\n        // 创建 WebSocket 实例\n        // 定义当前用户信息\n        const userId = localStorage.getItem('userId');\n        const username = localStorage.getItem('user');\n        if (userId && username) {\n            this.currentUser = {\n                user_id: JSON.parse(userId),\n                username: JSON.parse(username),\n                avatar: \"../../../assets/avatar/dick1.jpg\", // 这里需要根据实际情况获取用户头像\n            };\n        } else {\n            // 处理未登录情况，比如跳转到登录页面\n            this.$router.push('/login');\n        }\n    },\n    watch: {\n        roomID() {\n            this.messages = [];                           // 切换房间时清空消息列表\n            this.getHistoryMessages(0, 10); // 监听 roomID 变化时重新获取历史消息\n            this.fetchRoomInfo();\n        },\n        messages: {\n            deep: true,\n            handler() {\n                this.handleNewMessage();\n            }\n        },\n        ifUpdate() {\n            if (this.ifUpdate) {\n                this.$emit('update:ifUpdateRoomList2Chat', true);\n                this.ifUpdate = false;\n            }\n        },\n    },\n    mounted() {\n        this.scrollToBottom();\n    },\n    beforeUnmount() {\n        this.ws.close();\n    },\n    methods: {\n        // 对新消息进行处理\n        // addNewMessage(message) {\n        // 接收来自服务器的消息并处理\n        fetchRoomInfo() {\n            axios_config.get(`/api/room/info?room_id=${this.roomID}`).then(response => {\n                if (response.data.code === 0) {\n                    this.roomInfo = response.data.data;\n                } else {\n                    ElMessage.error('获取房间信息失败:', response.data.msg);\n                }\n            }).catch(error => {\n                ElMessage.error('获取房间信息失败:', error);\n            });\n        },\n        // 对新消息进行处理\n        addNewMessage(message) {\n            // 接收来自服务器的消息并处理\n            if (message.code === 0) {\n                if (message.data.room_id !== this.roomID) {\n                    return;\n                }\n                // message.data.sender_avatar = this.currentUser.avatar;\n                message.data.encryptInfo = message.en_data;\n                message.data.encryptInfo.key = localStorage.getItem('websocketBackendPassword');\n                if (message.data.type === 'video') {\n                    if (this.forceDeleteVideo === false) {\n                        this.recieveVideoVisible = true;\n                        this.ReceiveVideoChunk_Base64(message.data.content);\n                    } else {\n                    }\n                }\n                else {\n                    this.messages.push(message.data);\n                }\n            } else if (message.code === 1) {\n                ElMessage.error('收到错误消息:', message.msg);\n            } else if (message.code === 2) {\n                // 忽略心跳包\n            } else {\n                ElMessage.error('收到未知消息:', message);\n            }\n        },\n        // 接受来自 ChatInput 组件的消息并发送\n        sendMessageToParent(type, message) {\n            // 接收来自子组件的消息并处理\n            // 在这里可以进行进一步的处理，比如发送给服务器等操作\n            // this.sendMessageToServer(message);\n            this.ws.send({\n                room_id: this.roomID,\n                type: type,\n                content: message\n            });\n        },\n        ReceiveVideoChunk_Base64(VideoChunk_Base64) {\n            this.VideoChunks.push(VideoChunk_Base64);\n            this.VideoChunk = VideoChunk_Base64;\n        },\n        // 用于获取历史消息\n        async getHistoryMessages(lastMessageId, limit) {\n            try {\n                const response = await axios_config.post(\n                    '/api/message/list',\n                    {\n                        \"room_id\": this.roomID,\n                        \"last_message_id\": lastMessageId,\n                        \"limit\": limit\n                    });\n                if (response.data.data.length === 0) {\n                    ElMessage.info('没有更多历史消息了')\n                    return;\n                }\n                response.data.data.forEach(item => {\n                    item.encryptInfo = response.data.en_data;\n                    item.encryptInfo.key = localStorage.getItem('backendPassword');\n                });\n\n                // response.data.data 获取的消息列表ID是从大到小的，需要将其反转\n                this.messages = [...response.data.data.reverse(), ...this.messages];\n            } catch (error) {\n                ElMessage.error('Failed to fetch messages:', error);\n            }\n        },\n        // 用于点击“加载更多历史消息”按钮时调用\n        getMoreHistoryMessages() {\n            if (this.messages.length === 0) {\n                ElMessage.info('没有更多历史消息了')\n                return;\n            }\n            if (this.messages[this.messages.length - 1].ID <= 1) {\n                ElMessage.info('没有更多历史消息了')\n                return;\n            }\n            const minMessageId = Math.min(...this.messages.map(item => item.ID));\n            this.getHistoryMessages(minMessageId, 10);\n        },\n        // 滚动消息列表到底部\n        scrollToBottom() {\n            this.$nextTick(() => {\n                const container = this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap');\n                container.scrollTop = container.scrollHeight;\n            });\n            this.$refs.scrollbar.handleScroll(\n                { direction: 'bottom', target: this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap') }\n            )\n        },\n        //判断消息列表是否在底部\n        isAtBottom() {\n            const container = this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap');\n            // 判断精度，差值小于10px则认为在底部\n            return container.scrollTop + container.clientHeight + 10 >= container.scrollHeight;\n            // return container.scrollTop + container.clientHeight === container.scrollHeight;\n        },\n        // 当有新消息时，并且消息列表在底部时，自动滚动到底部，保持最新消息可见\n        handleNewMessage() {\n            if (this.isAtBottom()) {\n                this.scrollToBottom();\n            }\n        },\n        closeCamera() {\n            this.$refs.ChatInput.closeCamera();\n            this.recieveVideoVisible = false;\n        },\n        ForceforceDeleteVideoBeFalse() {\n            this.forceDeleteVideo = false;\n        },\n        ForceforceDeleteVideoBeTrue() {\n            this.forceDeleteVideo = true;\n        }\n    }\n};\n</script>\n\n<style scoped>\n.chat-header {\n    padding: 10px 30px;\n    background-color: #f5f7fa;\n    text-align: center;\n    height: 3em;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.more-icon {\n    cursor: pointer;\n}\n\n.room-title {\n    font-size: 20px;\n    font-weight: bold;\n}\n\n.chat-box {\n    margin: 0 60px;\n    height: calc(100vh - 8em);\n    display: flex;\n    flex-direction: column;\n    position: relative; /* 添加相对定位 */\n}\n\n.chat-messages {\n    flex: 1;\n}\n\n.message {\n    margin-bottom: 10px;\n}\n\n.input-box {\n    padding: 0;\n}\n\n#message-box {\n    height: calc(100% - 60px - 52px - 221px - 1em); /* 减去头部和输入框的高度 */\n}\n\n.message-inner-list {\n    display: flex;\n    flex-direction: column;\n}\n</style>\n\n","<template>\n\n    <!--  消息显示框：如果是用户发送的消息，则显示在右侧，否则显示在左侧  -->\n    <div class=\"message-item\" :class=\"{ 'message-from-user': isSenderUser }\">\n        <!--  头像显示  -->\n        <el-avatar shape=\"square\" :src=\"getAvatarUrl(message.sender_avatar)\" style=\"margin-top: 0px\"></el-avatar>\n        <!--  消息内容显示：包含发送者名称、消息内容  -->\n        <div class=\"message-content\">\n            <!--  用户名称显示  -->\n            <div v-if=\"isSenderUser === false\" class=\"sender-name, sender-name-from-other\">\n                {{ message.sender_name }}\n            </div>\n\n            <!--  消息内容显示  -->\n            <div @mouseenter=\"showMoreButton = true\" @mouseleave=\"showMoreButton = false\">\n                <div :class=\"{ 'bubble-and-more-left': !isSenderUser, 'bubble-and-more-right': isSenderUser }\">\n                    <div class=\"chat-bubble chat-bubble-top\"\n                        :class=\"isSenderUser ? 'chat-bubble-from-right' : 'chat-bubble-from-left'\" style=\"--chat-bubble-background-color: #ffffff;\n                        --chat-bubble-border-color: rgba(0, 0, 0, 0);\n                        --chat-bubble-text-color: #000\">\n\n                        <!--      文本显示 -->\n                        <!--            <div v-if=\"message.type === 'text'\" class=\"text-message\">-->\n                        <div v-if=\"message.type === 'text'\">\n                            {{ message.content }}\n                        </div>\n                        <!--      图片显示 -->\n                        <!--            <div v-else-if=\"message.type === 'image'\" class=\"image-message\">-->\n                        <div v-else-if=\"message.type === 'image'\">\n                            <el-image :src=\"getPicUrl(message.content)\" fit=\"contain\"\n                                :previewSrcList=\"[getPicUrl(message.content)]\"\n                                style=\"height: auto; display: block;\"></el-image>\n                        </div>\n                        <!--      文件显示 -->\n                        <!--            <div v-else-if=\"message.type === 'file'\" class=\"file-message file-message-link\">-->\n                        <div v-else-if=\"message.type === 'file'\" class=\"file-message-link\">\n                            <el-icon>\n                                <Link />\n                            </el-icon>\n                            <el-link :href=\"getFileUrl(message.content)\" target=\"_blank\">\n                                下载文件：{{ this.getFileName(message.content) }}\n                            </el-link>\n                        </div>\n                    </div>\n                    <el-icon v-if=\"showMoreButton\" style=\"margin: 5px 10px; cursor: pointer;\"\n                        @click=\"showDialog = true\">\n                        <More />\n                    </el-icon>\n                </div>\n            </div>\n        </div>\n    </div>\n    <el-dialog v-model=\"showDialog\" title=\"加密信息\" width=\"800\">\n        <template #header>\n            <div>加密信息</div>\n        </template>\n        <!-- 展示message.encryptInfo中的信息 -->\n        <div class=\"message-encrypt-info\">\n            <div class=\"message-encrypt-info-key\">加密方式： </div>\n            <div class=\"message-encrypt-info-value\">ZUC-256 加速算法xiao</div>\n        </div>\n\n        <div class=\"message-encrypt-info\">\n            <div class=\"message-encrypt-info-key\">消息长度：</div>\n            <div class=\"message-encrypt-info-value\">{{ message.encryptInfo.length }}</div>\n        </div>\n\n        <div class=\"message-encrypt-info\">\n            <div class=\"message-encrypt-info-key\">起始位置：</div>\n            <div class=\"message-encrypt-info-value\">{{ message.encryptInfo.position }}</div>\n        </div>\n\n        <div class=\"message-encrypt-info\">\n            <div class=\"message-encrypt-info-key\">加密密钥：</div>\n            <div class=\"message-encrypt-info-value\">{{ message.encryptInfo.key }}</div>\n        </div>\n\n        <div class=\"message-encrypt-info\">\n            <div class=\"message-encrypt-info-key\">加密结果（经过Base64编码）：</div>\n            <div class=\"message-encrypt-info-value\">{{ message.encryptInfo.data }}</div>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\nimport { ElAvatar, ElImage, ElLink } from 'element-plus';\nimport { Link } from \"@element-plus/icons\";\nimport { backendBaseUrl } from \"@/utils/base-url-setting\";\nimport \"@/assets/chatbubble.css\";\n\nexport default {\n    data() {\n        return {\n            showMoreButton: false,\n            showDialog: false,\n        }\n    },\n    components: {\n        Link,\n        ElAvatar,\n        ElImage,\n        ElLink\n    },\n    props: {\n        message: {\n            type: Object,\n            required: true\n        }\n    },\n    computed: {\n        isSenderUser() {\n            const userId = localStorage.getItem('userId');\n            return userId && parseInt(userId, 10) === this.message.sender_id;\n        }\n    },\n    methods: {\n        getFileUrl(content) {\n            const regex = /you can download the file on (\\/static\\/files\\/\\S+)/;\n            const match = content.match(regex);\n            if (match) {\n                return backendBaseUrl + match[1]; // 返回匹配到的完整URL\n            }\n            return \"\"; // 如果没有匹配到，返回null\n        },\n        getFileName(content) {\n            // content中的数据内容是：response.data.data.file_name + ' you can download the file on ' + response.data.data.file_url\n            // 使用正则表达式匹配出文件的名称\n            const regex = /(.+) you can download the file on \\/\\S+/g;\n            return content.replace(regex, '$1');\n        },\n        getAvatarUrl(avatar) {\n            if (!avatar) {\n                // 如果 user.avatar 为 null，返回默认的 URL\n                return 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png';\n            } else if (typeof avatar === 'string') {\n                return backendBaseUrl + avatar;\n            }\n            // 如果头像文件不存在或user.avatar格式不正确，则返回默认的 URL\n            return 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png';\n        },\n        getPicUrl(url) {\n            if (url) {\n                return backendBaseUrl + url;\n                // return this.avatarUrl(url);\n            }\n            return backendBaseUrl + '/static/avatars/nopic.png';\n        }\n    }\n}\n</script>\n\n<style scoped>\n.message-item {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    margin: 10px 20px;\n}\n\n.message-from-user {\n    flex-direction: row-reverse;\n}\n\n.message-content {\n    display: flex;\n    flex-direction: column;\n\n}\n\n.sender-name {\n    /* font-weight: lighter; */\n    font-size: 14px;\n    font-stretch: semi-condensed;\n    color: #808080;\n}\n\n\n.sender-name-from-other {\n    margin-left: 10px;\n    text-align: left;\n}\n\n.sender-name-from-user {\n    margin-right: 10px;\n    text-align: right;\n}\n\n.text-message,\n.image-message,\n.file-message {\n    background: #f2f2f2;\n    border: 1px solid #d9d9d9;\n    border-radius: 12px;\n    margin: 5px;\n    padding: 5px 10px 5px 10px;\n}\n\n.file-message-link {\n    display: flex;\n    align-items: center;\n}\n\n.bubble-and-more-left {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.bubble-and-more-right {\n    display: flex;\n    flex-direction: row-reverse;\n    align-items: center;\n}\n\n.message-encrypt-info {\n    display: flex;\n    flex-direction: column;\n    margin: 15px;\n}\n\n.message-encrypt-info-key {\n    font-weight: bold;\n    font-size: large;\n}\n</style>\n","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"Link\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M715.648 625.152 670.4 579.904l90.496-90.56c75.008-74.944 85.12-186.368 22.656-248.896-62.528-62.464-173.952-52.352-248.96 22.656L444.16 353.6l-45.248-45.248 90.496-90.496c100.032-99.968 251.968-110.08 339.456-22.656 87.488 87.488 77.312 239.424-22.656 339.456l-90.496 90.496zm-90.496 90.496-90.496 90.496C434.624 906.112 282.688 916.224 195.2 828.8c-87.488-87.488-77.312-239.424 22.656-339.456l90.496-90.496 45.248 45.248-90.496 90.56c-75.008 74.944-85.12 186.368-22.656 248.896 62.528 62.464 173.952 52.352 248.96-22.656l90.496-90.496 45.248 45.248zm0-362.048 45.248 45.248L398.848 670.4 353.6 625.152 625.152 353.6z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/Link.vue\";\n\nexport default script;\n","import { render } from \"./MessageItem.vue?vue&type=template&id=7eb7e1ca&scoped=true\"\nimport script from \"./MessageItem.vue?vue&type=script&lang=js\"\nexport * from \"./MessageItem.vue?vue&type=script&lang=js\"\n\nimport \"./MessageItem.vue?vue&type=style&index=0&id=7eb7e1ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7eb7e1ca\"]])\n\nexport default __exports__","<template>\n    <div class=\"chat-input\">\n\n        <div class=\"chat-input-icon-box\">\n            <!-- 发送图片 -->\n            <div class=\"upload-icon\">\n                <el-tooltip class=\"box-item\" effect=\"dark\" content=\"发送图片\" placement=\"top\">\n                    <el-icon size=\"20px\" @click=\"openImageChooser\">\n                        <Picture />\n                    </el-icon>\n                </el-tooltip>\n                <input type=\"file\" ref=\"imageInput\" style=\"display: none;\" accept=\"image/*\" @change=\"handleImageUpload\">\n            </div>\n            <!-- 发送文件 -->\n            <div class=\"upload-icon\">\n                <el-tooltip class=\"box-item\" effect=\"dark\" content=\"发送文件\" placement=\"top\">\n                    <!-- 文件上传按钮 -->\n                    <!--        <el-button type=\"primary\" class=\"send-button\" @click=\"openFileChooser\" style=\"margin-bottom: 10px\">发送文件</el-button>-->\n                    <el-icon size=\"20px\" @click=\"openFileChooser\">\n                        <FolderAdd />\n                    </el-icon>\n                </el-tooltip>\n                <!-- 隐藏的文件输入 -->\n                <input type=\"file\" ref=\"fileInput\" style=\"display: none;\" @change=\"handleFileUpload\">\n            </div>\n            <!-- 开启视频 -->\n            <div class=\"upload-icon\">\n                <el-tooltip content=\"打开摄像头\" placement=\"top\">\n                    <el-icon size=\"20px\" @click=\"openCameraandVideoChat\">\n                        <VideoCamera />\n                    </el-icon>\n                </el-tooltip>\n                <div class=\"video-container\" v-if=\"videocontainerVisible\">\n                    <el-dialog v-model=\"videoVisible\" title=\"视频聊天\" width=\"660\" height=\"480\"\n                        v-model:visible=\"videoVisible\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\n                        <video ref=\"video\" id=\"video\" width=\"640\" height=\"480\" autoplay></video>\n                        <el-button @click=\"startSendingVideo\">连接</el-button>\n                        <el-button class=\"close-button\" @click=\"closeCamera\">关闭摄像头</el-button>\n                    </el-dialog>\n                    <!-- <video id=\"video\" width=\"500px\" height=\"500px\" autoplay=\"autoplay\"></video> -->\n                </div>\n            </div>\n        </div>\n\n        <el-divider style=\"margin: 0 5px\" />\n\n        <div class=\"chat-input-input-box\">\n            <textarea rows=\"3\" v-model=\"newMessage\" placeholder=\"输入消息...\" class=\"message-input\"\n                @keyup.enter=\"sendMessage()\" />\n        </div>\n\n        <div class=\"chat-input-send-box\">\n            <el-button type=\"success\" class=\"send-button\" @click=\"sendMessage()\">\n                <!-- 发送消息 -->\n                <el-icon size=\"20px\">\n                    <Promotion />\n                </el-icon>\n            </el-button>\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport axios_config from \"@/utils/axios-config\";\nimport { ElMessage } from \"element-plus\";\nimport { FolderAdd, Picture, VideoCamera } from \"@element-plus/icons\";\nimport { Bottom } from \"@element-plus/icons-vue\";\n\nexport default {\n    components: {\n        Picture,\n        FolderAdd,\n        VideoCamera,\n        Bottom,\n    },\n    props: {\n        roomID: {\n            type: Number,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            newMessage: '', // 绑定输入框的内容\n            roomId: this.roomID,\n            videoVisible: false,\n            videoVisible2: false,\n            videocontainerVisible: false,\n            stream: null,\n            isRecording: false,\n            mediaRecorder: null,\n            chunks: [],\n            video: null,\n\n        };\n    },\n    methods: {\n        async openCameraandVideoChat() {\n            // this.$emit('openCamera');\n            this.videoVisible = true; // 先显示视频容器\n            this.videocontainerVisible = true;\n            this.$nextTick(async () => {\n                try {\n                    // 请求摄像头权限并获取视频流\n                    this.stream = await navigator.mediaDevices.getUserMedia({ video: true });\n                    this.$emit('ForceforceDeleteVideoBeFalse');\n                    // this.sendVideo();\n                    // 将视频流设置为视频元素的源\n                    this.video = this.$refs.video;\n                    // this.$refs.video.srcObject = this.stream;\n                    // this.video = document.getElementById('video');\n                    this.video.srcObject = this.stream;\n                } catch (err) {\n                    ElMessage.error('Error accessing camera:', err);\n                }\n            });\n        },\n        closeCamera() {\n            if (this.stream) {\n                // 停止所有视频流的轨道\n                this.stream.getTracks().forEach(track => track.stop());\n                this.stream = null;\n            }\n            if (this.video) {\n                this.video.srcObject = null; // 清空视频元素的源\n            }\n            if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n                this.ws.close(); // 关闭 WebSocket 连接\n            }\n            clearInterval(this.frameInterval); // 清除定时器\n            this.videoVisible = false;\n            this.videocontainerVisible = false;\n            this.stopRecording();\n            // this.isRecording = false;\n\n        },\n\n        startSendingVideo() {\n            // 重新刷新视频流\n            // this.reopenCamera();\n\n            this.isRecording = true;\n            this.videoVisible = false;\n            const canvas = document.createElement('canvas');\n            const context = canvas.getContext('2d');\n            canvas.width = 640;\n            canvas.height = 480;\n\n            const sendVideoFrame = () => {\n                if (!this.isRecording) return;\n\n                if (this.video.paused || this.video.ended) {\n                    return;\n                }\n                context.drawImage(this.video, 0, 0, canvas.width, canvas.height);\n                const videoFrameBase64 = canvas.toDataURL('image/jpeg', 0.5);\n                this.$emit('send', 'video', videoFrameBase64);\n\n                // 使用requestAnimationFrame来优化动画性能\n                requestAnimationFrame(sendVideoFrame);\n            };\n\n            // 初始调用\n            sendVideoFrame();\n        },\n\n        reopenCamera() {\n            if (this.stream) {\n                this.stream.getTracks().forEach(track => track.stop());\n                this.stream = null;\n            }\n            this.$nextTick(async () => {\n                try {\n                    this.stream = await navigator.mediaDevices.getUserMedia({ video: true });\n                    this.video.srcObject = this.stream;\n                } catch (err) {\n                    ElMessage.error('Error accessing camera:', err);\n                }\n            });\n\n        },\n\n        stopRecording() {\n            if (this.mediaRecorder && this.isRecording) {\n                this.isRecording = false;\n                this.mediaRecorder.stop();\n                // this.$emit('send', 'video', this.chunks);\n                this.chunks = [];\n            }\n        },\n\n        sendMessage() {\n            // 如果消息以回车结尾，去掉回车\n            this.newMessage = this.newMessage.trim();\n            // 如果消息为空，不发送\n            if (!this.newMessage) {\n                ElMessage.warning('消息不能为空');\n                return;\n            }\n            // 向父组件发送输入的消息\n            this.$emit('send', 'text', this.newMessage);\n            this.newMessage = ''; // 发送后清空输入框\n        },\n        // 打开文件选择器\n        openFileChooser() {\n            this.$refs.fileInput.click();\n        },\n        openImageChooser() {\n            this.$refs.imageInput.click();\n        },\n        handleImageUpload(event) {\n            const file = event.target.files[0];\n            if (file) {\n                this.uploadFile(file, 'image');\n            }\n        },\n        // 处理文件上传\n        handleFileUpload(event) {\n            const file = event.target.files[0]; // 获取文件\n            if (!file) {\n                return;\n            }\n            // 在这里添加文件传输的逻辑\n            // 假设有一个函数 uploadFile 来处理文件上传\n            this.uploadFile(file, 'file');\n        },\n\n        async uploadFile(file, type) {\n            // 发送文件到服务器\n            try {\n                const formData = new FormData();\n                formData.append('room_id', this.roomId);\n                formData.append('file', file);\n\n                const response = await axios_config.post('/api/message/upload', formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                });\n\n                if (response.data.code === 0) {\n                    // 上传成功，返回文件信息\n                    const msg = {\n                        room_id: this.roomId,\n                        type: 'file',\n                        content: response.data.data.file_name\n                    }\n                    if (type === 'file') {\n                        this.$emit('send', 'file', response.data.data.file_name + ' you can download the file on ' + response.data.data.file_url);\n                    } else if (type === 'image') {\n                        this.$emit('send', 'image', response.data.data.file_url);\n                    } else {\n                        throw new Error('上传文件失败，无效的文件类型');\n                    }\n                    return response.data.data;\n                } else {\n                    // 上传失败，抛出错误信息\n                    throw new Error(response.data.msg || '上传文件失败');\n                }\n            } catch (error) {\n                ElMessage.error('Failed to upload file:', error);\n            }\n        },\n    }\n};\n</script>\n\n<style scoped>\n.chat-input {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    margin: 10px 0px;\n    padding: 5px 10px;\n    border-radius: 8px;\n    border: 1px solid #ffffff;\n    background: #ffffff;\n    box-shadow: 0 16px 20px 0 rgba(174, 167, 223, .2);\n    transition: border 0.5s linear;\n}\n\n.chat-input:hover {\n    border: 1px solid #4955f5;\n}\n\n.chat-input-icon-box {\n    padding: 5px 10px;\n    display: flex;\n    flex-direction: row;\n    justify-content: start;\n}\n\n.upload-icon {\n    margin-right: 10px;\n    cursor: pointer;\n}\n\n.chat-input-input-box {\n    padding: 5px 10px;\n    caret-color: transparent;\n}\n\n.message-input {\n    resize: none;\n    flex: 1;\n    /* 输入框占据剩余空间 */\n    border: none;\n    background: none;\n    width: 100%;\n    font-size: medium;\n    font-family: \"微软雅黑\", \"黑体\", serif;\n    caret-color: #000000;\n}\n\n.message-input:focus {\n    outline: none;\n}\n\n\n\n.chat-input-send-box {\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: end;\n}\n\n.send-button {\n    width: 60px;\n    /* 设置发送按钮的宽度 */\n    height: 35px;\n    /* 设置按钮的高度，与输入框高度一致 */\n    margin-right: 10px;\n    margin-left: 10px;\n    margin-top: 8px;\n    margin-block-end: 10px;\n    background: linear-gradient(322deg, #1f6ff5 7.93%, #9a7ffc 92.22%);\n    border: none;\n    border-radius: 20px;\n    transition: background 0.5s linear;\n}\n\n.send-button:hover {\n    background: linear-gradient(322deg, #628eed 7.93%, #a1a4f8 92.22%);\n}\n\n.video-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.8);\n    /* 添加背景色以突出显示视频 */\n}\n\nvideo {\n    border: 1px solid #ccc;\n    transform: rotateY(180deg);\n}\n\n.close-button {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n}\n</style>\n","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"Picture\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M160 160v704h704V160H160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32z\"\n}, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64zM185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952L185.408 876.992z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2,\n    _hoisted_3\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/Picture.vue\";\n\nexport default script;\n","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"FolderAdd\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32zm384 416V416h64v128h128v64H544v128h-64V608H352v-64h128z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/FolderAdd.vue\";\n\nexport default script;\n","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"VideoCamera\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M704 768V256H128v512h576zm64-416 192-96v512l-192-96v128a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32v128zm0 71.552v176.896l128 64V359.552l-128 64zM192 320h192v64H192v-64z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/VideoCamera.vue\";\n\nexport default script;\n","import { render } from \"./ChatInput.vue?vue&type=template&id=76f2652b&scoped=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=js\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=js\"\n\nimport \"./ChatInput.vue?vue&type=style&index=0&id=76f2652b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-76f2652b\"]])\n\nexport default __exports__","import { userCipherWebsocketBackend, userCipherWebsocketFrontend } from '@/utils/encrypt.js';\nimport { ElMessage } from \"element-plus\";\n\nexport default class WebsocketClass {\n    /**\n     * @description: 初始化参数\n     * @param {*} url ws资源路径\n     * @param token token\n     * @param {*} callback 服务端信息回调\n     */\n    constructor(url, token, callback, ifENCRYPT = false) {\n        this.url = url + '?token=Bearer ' + token\n        this.token = token\n        this.callback = callback\n        this.ws = null // websocket 对象\n        this.status = 0 // 连接状态: 0-关闭 1-连接 2-手动关闭\n        this.ping = 10000 // 心跳时长\n        this.pingInterval = null // 心跳定时器\n        this.reconnect = 5000 // 重连间隔\n        this.ifENCRYPT = ifENCRYPT\n        this.textDecoder = new TextDecoder('utf-8')\n    }\n\n    /**\n     * @description: 连接\n     */\n    connect() {\n        this.ws = new WebSocket(this.url)\n            // 监听socket连接\n        this.ws.onopen = () => {\n                this.status = 1\n                this.heartHandler()\n            }\n            // 监听socket消息\n        this.ws.onmessage = (e) => {\n                if (this.ifENCRYPT) {\n                    let data = JSON.parse(e.data)\n                        // let data = e.data\n                    if (data.code === 0) {\n                        try {\n                            data.data.content = userCipherWebsocketBackend.decrypt(data.en_data.data, data.en_data.position)\n                        } catch (e) {\n                            ElMessage.error('解密失败，请重新登录获取密钥');\n                        }\n                    }\n                    this.callback(data)\n                } else {\n                    this.callback(JSON.parse(e.data))\n                }\n            }\n            // 监听socket错误信息\n        this.ws.onerror = (e) => {}\n            // 监听socket关闭\n        this.ws.onclose = (e) => {\n            this.onClose(e)\n        }\n    }\n\n    /**\n     * @description: 发送消息\n     */\n    send(data) {\n        /*\n        data的格式为：\n        {\n            room_id: 0,\n            type: 'text',\n            content: 'hello'\n         }\n         将data.data进行加密\n         */\n        const dd = userCipherWebsocketFrontend.encrypt(data.content);\n        data.content = \"\";\n        data.en_data = {\n            data: dd.cipherText,\n            position: dd.position,\n            mac: '',\n            length: 0\n        };\n        /*\n        发送的数据格式为：\n        {\n            room_id: 0,\n            type: 'text',\n            data: {\n                data: '加密后的数据',\n                position: '加密位置',\n                mac: '',\n                length: 0\n            }\n         }\n         */\n        return this.ws.send(JSON.stringify(data))\n    }\n\n    /**\n     * @description: 关闭 weibsocket 主动关闭不会触发重连\n     */\n    close() {\n        this.status = 2\n        this.ws.close()\n        clearInterval(this.pingInterval)\n    }\n\n    /**\n     * @description: socket关闭事件\n     */\n    onClose(e) {\n        if (this.status === 2) {\n            return\n        }\n        console.error(e)\n        this.status = this.status === 2 ? this.status : 0\n        setTimeout(() => {\n            if (this.status === 0) {\n                this.connect()\n            }\n        }, this.reconnect)\n    }\n\n    /**\n     * @description: 心跳机制\n     */\n    heartHandler() {\n        const data = {\n            room_id: 0,\n            type: 'ping',\n            data: ''\n        }\n        this.pingInterval = setInterval(() => {\n            if (this.status === 1) {\n                this.ws.send(JSON.stringify(data))\n            } else {\n                clearInterval(this.pingInterval)\n            }\n        }, this.ping)\n    }\n}","<template>\n    <div class=\"video-container\" width=\"640\" height=\"480\">\n        <canvas ref=\"canvasPlayer\" class=\"canvas-player\" width=\"640\" height=\"480\"></canvas>\n        <button @click=\"StopLive\">关闭</button>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'LiveStream',\n    props: {\n        roomID: {\n            type: Number,\n            required: true\n        },\n        VideoChunk: {\n            type: String,\n            required: true\n        },\n\n    },\n    mounted() {\n        this.initializeLiveStreaming();\n    },\n    data() {\n        return {\n            isInitialized: false,\n            canvasElement: null,\n            mediaSource: null,\n            sourceBuffer: null,\n            queue: [],\n\n        }\n    },\n\n    watch: {\n        VideoChunk: {\n            deep: true,\n            handler(newVal, oldVal) {\n                if (!this.isInitialized) {\n                    this.initializeLiveStreaming();\n                }\n                this.handleReceivedVideoChunk_Base64(newVal);\n                // this.processQueue();\n            }\n        },\n        'queue.length'(newLength) {\n            if (newLength > 0 && this.isInitialized) {\n                this.processQueue(); // 当队列非空时，开始处理队列\n            }\n        }\n\n\n    },\n    methods: {\n        initializeLiveStreaming() {\n            this.canvasElement = this.$refs.canvasPlayer;\n            // this.canvasElement = this.$refs.video;\n            if (!this.canvasElement) {\n                ElMessage.error('Video element is not initialized.');\n                return;\n            }\n            this.isInitialized = true;\n        },\n        handleReceivedVideoChunk_Base64(VideoChunk_Base64) {\n            this.queue.push(VideoChunk_Base64); // 将视频块添加到队列中\n            // this.processQueue(); // 尝试处理队列\n        },\n        processQueue() {\n\n            try {\n                while (this.queue.length > 0) {\n                    const VideoChunk_Base64 = this.queue.shift(); // 从队列中移除一个元素\n                    // 把经base64编码的图片转为canvas，显示在canvasElement上，且左右反转\n                    const img = new Image();\n                    img.src = VideoChunk_Base64;\n                    img.onload = () => {\n                        const canvas = this.canvasElement;\n                        const ctx = canvas.getContext('2d');\n                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n                    };\n                }\n            } catch (error) {\n                ElMessage.error('Error processing queue:', error);\n            }\n\n        },\n\n        StopLive() {\n            // 调用chatinput的closecamara函数，关闭摄像头，关闭直播\n            this.$emit('closeCamera');\n            // 消除视频流，消除this.queue,消除this.VideoChunk，消除this.canvasElement，消除video-container\n            this.queue = [];\n            this.canvasElement = null;\n            this.isInitialized = false;\n            this.$el.remove();\n            this.$emit('ForceforceDeleteVideoBeTrue');\n\n        }\n\n    }\n}\n</script>\n\n<style scoped>\n.video-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 640px;\n    background-color: #000;\n}\n.video-container button {\n    /* 右上角 */\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 999;\n    background-color: #f56c6c;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    padding: 5px 10px;\n    cursor: pointer;\n    font-size: 16px;\n    margin: 10px;\n}\n</style>\n","import { render } from \"./LiveStream.vue?vue&type=template&id=256c256c&scoped=true\"\nimport script from \"./LiveStream.vue?vue&type=script&lang=js\"\nexport * from \"./LiveStream.vue?vue&type=script&lang=js\"\n\nimport \"./LiveStream.vue?vue&type=style&index=0&id=256c256c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-256c256c\"]])\n\nexport default __exports__","<!-- /src/components/IM/Room/RoomDrawer.vue -->\n\n<template>\n    <el-drawer show-close drawer size=\"450px\">\n        <template #header>\n            <div class=\"room-drawer-header\">\n                <h2>{{ roomInfo.name }}</h2>\n                <el-icon style=\"margin: 20px; cursor: pointer;\" @click=\"updateRoomNameBox\"><Edit /></el-icon>\n            </div>\n        </template>\n\n        <el-card style=\"max-width: 480px\">\n            <template #header>\n                <div class=\"card-description\">\n                    <span>房间描述</span>\n                </div>\n            </template>\n            <p>{{ roomInfo.description }}</p>\n            <template #footer>\n                <el-button type=\"primary\" class=\"changedescription\" @click=\"updateRoomInfoBox\">修改房间信息</el-button>\n            </template>\n        </el-card>\n\n        <p></p>\n\n        <el-card style=\"max-width: 480px\">\n            <template #header>\n                <div class=\"card-header\">\n                    <span>房间成员</span>\n                </div>\n            </template>\n            <!--      <p v-for=\"user in roomUsers\" :key=\"user.id\">{{ user.username }}-->\n            <!--      </p>-->\n            <el-row>\n                <el-col v-for=\"user in roomUsers\" :key=\"user.id\" :span=\"12\" style=\"display:flex; text-align: center; margin: 10px 0;\">\n                    <el-avatar :src=\"avatarUrl(user.avatar)\" :size=\"40\"></el-avatar>\n                    <span style=\"margin: auto auto auto 10px;\">{{ user.username }}</span>\n                </el-col>\n            </el-row>\n            <template #footer>\n                <el-button type=\"primary\" @click=\"addUserBox\">邀请成员</el-button>\n            </template>\n\n        </el-card>\n\n        <template #footer>\n            <el-button type=\"danger\" @click=\"deleteRoom\">退出房间</el-button>\n        </template>\n\n    </el-drawer>\n\n</template>\n\n\n<script>\nimport axios_config from \"@/utils/axios-config\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport {backendBaseUrl} from \"@/utils/base-url-setting\";\n\nexport default {\n    name: 'RoomDrawer',\n    props: {\n        roomID: {\n            type: Number,\n            required: true\n        },\n        roomInfo: {\n            type: Object,\n            required: true\n        },\n    },\n    data() {\n        return {\n            roomUsers: [],\n        }\n    },\n    watch: {\n        roomID() {\n            this.fetchRoomUsers();\n        }\n    },\n    created() {\n        this.fetchRoomUsers();\n    },\n    methods: {\n        // ElMessageBox.prompt 的参数设置参考：https://blog.csdn.net/weixin_47872288/article/details/139044826\n        updateRoomNameBox() {\n            ElMessageBox.prompt(\n                    '请输入新的房间名称',\n                    '修改房间名称',\n                    {\n                        inputValue: this.roomInfo.name,\n                        confirmButtonText: '修改',\n                        cancelButtonText: '取消',\n                        inputPattern: /\\S/,\n                        inputErrorMessage: '房间名称不能为空'\n                    }\n            ).then(({ value }) => {\n                if (!value) {\n                    ElMessage.error('房间名称不能为空');\n                    return;\n                }\n                // 修改房间名称\n                const newRoomInfo = this.roomInfo;\n                newRoomInfo.name = value;\n                this.updateRoomInfo(newRoomInfo);\n            }).catch(() => {\n                ElMessage.info('取消修改');\n            });\n        },\n        updateRoomInfoBox() {\n            ElMessageBox.prompt(\n                    '请输入新的房间描述',\n                    '修改房间信息',\n                    {\n                        inputValue: this.roomInfo.description,\n                        confirmButtonText: '修改',\n                        cancelButtonText: '取消',\n                        inputType: 'textarea',\n                        inputPattern: /\\S/,\n                        inputErrorMessage: '房间描述不能为空'\n                    }\n            ).then(({ value }) => {\n                if (!value) {\n                    ElMessage.error('房间描述不能为空');\n                    return;\n                }\n                // 修改房间描述\n                const newRoomInfo = this.roomInfo;\n                newRoomInfo.description = value;\n                this.updateRoomInfo(newRoomInfo);\n            }).catch(() => {\n                ElMessage.info('取消修改');\n            });\n        },\n        addUserBox() {\n            ElMessageBox.prompt(\n                    '请输入邀请的用户名称',\n                    '邀请朋友',\n                    {\n                        confirmButtonText: '邀请',\n                        cancelButtonText: '取消',\n                        inputType: 'textarea',\n                        inputErrorMessage: '用户名称不能为空'\n                    }\n            ).then(({ value }) => {\n                if (!value) {\n                    ElMessage.error('用户名称不能为空');\n                    return;\n                }\n                // 创建新房间\n                this.addUser(value);\n            }).catch(() => {\n                ElMessage.info('取消邀请');\n            });\n        },\n        async updateRoomInfo(newRoomInfo) {\n            try {\n                const response = await axios_config.post('/api/room/update',\n                    {\n                        'room_id': this.roomID,\n                        'name': newRoomInfo.name,\n                        'description': newRoomInfo.description\n                    },\n                );\n                if (response.data.code !== 0) {\n                    ElMessage.error(response.data.msg);\n                    return false;\n                }\n                ElMessage.success('修改成功');\n                this.$emit('update:roomInfo', newRoomInfo);\n                this.$emit('update:ifUpdate', true);\n            } catch (error) {\n                ElMessage.error('Failed to update room info:', error);\n                return false;\n            }\n            return true;\n        },\n        async addUser(name) {\n            try {\n                const response = await axios_config.post('/api/room/add_user',\n                    {\n                        'room_id': this.roomID,\n                        'user_name': name,\n                        'role': 'member'\n                    },\n                );\n                if (response.data.code !== 0) {\n                    ElMessage.error(response.data.msg);\n                    return false;\n                }\n                await this.fetchRoomUsers();\n            } catch (error) {\n                ElMessage.error('服务器错误');\n                return false;\n            }\n            ElMessage.success('邀请成功');\n            return true;\n        },\n        async deleteRoom() {\n            try {\n                const response = await axios_config.delete(\n                    '/api/room/delete?room_id=' + this.roomID\n                );\n                if (response.data.code !== 0) {\n                    ElMessage.error(response.data.msg);\n                    return false;\n                }\n                // 将v-model传递的ifUpdate设置为true，触发父组件的watch\n                this.$emit('update:ifUpdate', true);\n                ElMessage.success('退出房间成功');\n            } catch (error) {\n                return false;\n            }\n        },\n        async fetchRoomUsers() {\n            // 获取房间成员列表\n            try {\n                const response = await axios_config.get('/api/room/members?room_id=' + this.roomID);\n\n                if (response.data.code === 0) {\n                    this.roomUsers = response.data.data;\n                } else {\n                    ElMessage.error(response.data.msg);\n                }\n            } catch (error) {\n                ElMessage.error('获取房间成员列表失败');\n            }\n\n\n        },\n        avatarUrl(url) {\n            if (url) {\n                return backendBaseUrl + url;\n            } else {\n                return backendBaseUrl + '/static/avatars/nopic.png';\n            }\n        }\n\n\n    }\n};\n</script>\n\n<style scoped>\n\n.room-drawer-header {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n}\n\n</style>\n","import { render } from \"./RoomDrawer.vue?vue&type=template&id=3335d8b1&scoped=true\"\nimport script from \"./RoomDrawer.vue?vue&type=script&lang=js\"\nexport * from \"./RoomDrawer.vue?vue&type=script&lang=js\"\n\nimport \"./RoomDrawer.vue?vue&type=style&index=0&id=3335d8b1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3335d8b1\"]])\n\nexport default __exports__","import { render } from \"./RoomChat.vue?vue&type=template&id=67230354&scoped=true\"\nimport script from \"./RoomChat.vue?vue&type=script&lang=js\"\nexport * from \"./RoomChat.vue?vue&type=script&lang=js\"\n\nimport \"./RoomChat.vue?vue&type=style&index=0&id=67230354&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67230354\"]])\n\nexport default __exports__","import { render } from \"./RoomList.vue?vue&type=template&id=9bfb1b5a&scoped=true\"\nimport script from \"./RoomList.vue?vue&type=script&lang=js\"\nexport * from \"./RoomList.vue?vue&type=script&lang=js\"\n\nimport \"./RoomList.vue?vue&type=style&index=0&id=9bfb1b5a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9bfb1b5a\"]])\n\nexport default __exports__"],"names":["axios_config","axios","create","baseURL","backendBaseUrl","timeout","interceptors","request","use","config","headers","Authorization","localStorage","getItem","url","includes","data","dd","userCipherFrontend","encrypt","JSON","stringify","cipherText","position","mac","length","error","console","log","Promise","reject","response","encryptedData","en_data","decryptedData","userCipherBackend","decrypt","e","ElMessage","clear","$router","push","parse","status","window","location","href","class","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_menu","default","_withCtx","_component_el_scrollbar","_Fragment","_renderList","$data","rooms","room","_createBlock","_component_el_menu_item","activeRoomId","key","ID","index","onClick","$event","$options","activeOneRoom","_createTextVNode","_toDisplayString","name","_","_component_el_button","type","createRoomBox","_hoisted_4","_component_RoomChat","roomID","ifUpdateRoomList2Chat","_cache","_createCommentVNode","id","ref","width","height","roomInfo","$props","_component_el_icon","drawer","_component_More","_component_RoomDrawer","modelValue","ifUpdate","_hoisted_5","_hoisted_6","link","getMoreHistoryMessages","messages","message","_component_MessageItem","_component_el_dialog","recieveVideoVisible","title","visible","_hoisted_7","_component_LiveStream","VideoChunk","onCloseCamera","closeCamera","onForceforceDeleteVideoBeTrue","ForceforceDeleteVideoBeTrue","_hoisted_8","_component_ChatInput","onSend","sendMessageToParent","onForceforceDeleteVideoBeFalse","ForceforceDeleteVideoBeFalse","_normalizeClass","isSenderUser","_component_el_avatar","shape","src","getAvatarUrl","sender_avatar","sender_name","onMouseenter","showMoreButton","onMouseleave","content","_component_el_image","getPicUrl","fit","previewSrcList","_component_Link","_component_el_link","getFileUrl","target","getFileName","showDialog","header","_hoisted_9","_hoisted_10","encryptInfo","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","script","defineComponent","xmlns","viewBox","createVNode","fill","d","render","_ctx","$setup","openBlock","createBlock","__file","components","Link","ElAvatar","ElImage","ElLink","props","Object","required","computed","userId","parseInt","this","sender_id","methods","regex","match","replace","avatar","__exports__","autoplay","_component_el_tooltip","effect","placement","size","openImageChooser","_component_Picture","accept","onChange","args","handleImageUpload","openFileChooser","_component_FolderAdd","handleFileUpload","openCameraandVideoChat","_component_VideoCamera","videocontainerVisible","videoVisible","startSendingVideo","_component_el_divider","rows","newMessage","placeholder","onKeyup","_withKeys","sendMessage","_component_Promotion","Picture","FolderAdd","VideoCamera","Bottom","Number","roomId","videoVisible2","stream","isRecording","mediaRecorder","chunks","video","$nextTick","async","navigator","mediaDevices","getUserMedia","$emit","$refs","srcObject","err","getTracks","forEach","track","stop","ws","readyState","WebSocket","OPEN","close","clearInterval","frameInterval","stopRecording","canvas","document","createElement","context","getContext","sendVideoFrame","paused","ended","drawImage","videoFrameBase64","toDataURL","requestAnimationFrame","reopenCamera","trim","warning","fileInput","click","imageInput","event","file","files","uploadFile","formData","FormData","append","post","code","file_name","file_url","Error","msg","WebsocketClass","constructor","token","callback","ifENCRYPT","ping","pingInterval","reconnect","textDecoder","TextDecoder","connect","onopen","heartHandler","onmessage","userCipherWebsocketBackend","onerror","onclose","onClose","send","userCipherWebsocketFrontend","setTimeout","room_id","setInterval","StopLive","String","mounted","initializeLiveStreaming","isInitialized","canvasElement","mediaSource","sourceBuffer","queue","watch","deep","handler","newVal","oldVal","handleReceivedVideoChunk_Base64","newLength","processQueue","canvasPlayer","VideoChunk_Base64","shift","img","Image","onload","ctx","$el","remove","_component_el_drawer","updateRoomNameBox","_component_Edit","footer","deleteRoom","_component_el_card","updateRoomInfoBox","description","addUserBox","_component_el_row","roomUsers","user","_component_el_col","span","avatarUrl","username","fetchRoomUsers","created","ElMessageBox","prompt","inputValue","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","value","newRoomInfo","updateRoomInfo","catch","info","inputType","addUser","success","delete","get","Boolean","RoomDrawer","MessageItem","ChatInput","LiveStream","wsBaseUrl","addNewMessage","currentUser","MediaSource","VideoChunks","videoElement","videoDuration","ffmpeg","videoTime","forceDeleteVideo","getHistoryMessages","fetchRoomInfo","user_id","handleNewMessage","scrollToBottom","beforeUnmount","ReceiveVideoChunk_Base64","lastMessageId","limit","item","reverse","minMessageId","Math","min","map","container","scrollbar","querySelector","scrollTop","scrollHeight","handleScroll","direction","isAtBottom","clientHeight","activeRoom","RoomChat","ifFetch","selectNoRoom","newValue","oldValue","fetchRooms","beforeMount","jumpFromFriendChat","$store","getters","getActiveRoom","commit","createRoom","find"],"sourceRoot":""}